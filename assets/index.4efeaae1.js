import{f as e,u as a,s as t,g as n,r as l,i,c as u,F as s,a as r,w as p,v as o,j as d,p as y,l as v,o as c,m as b,t as m}from"./vendor.967f8ea1.js";import{C as w,a as f,N as g}from"./nft.61b44095.js";import{W as h,J as T}from"./web3-provider.5a13caa5.js";var _=[{inputs:[{internalType:"address",name:"rAddr",type:"address"},{internalType:"address",name:"gAddr",type:"address"},{internalType:"address",name:"aAddr",type:"address"},{internalType:"address",name:"cAddr",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"},{internalType:"uint256",name:"class",type:"uint256"},{internalType:"uint32",name:"_str",type:"uint32"},{internalType:"uint32",name:"_dex",type:"uint32"},{internalType:"uint32",name:"_const",type:"uint32"},{internalType:"uint32",name:"_int",type:"uint32"},{internalType:"uint32",name:"_wis",type:"uint32"},{internalType:"uint32",name:"_cha",type:"uint32"}],name:"pointBuy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseStrength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseDexterity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseConstitution",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseIntelligence",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseWisdom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseCharisma",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"adventure",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"attackCellar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"levelUp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"approveBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"adventureAndAttackDungeon",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"levelUpAndClaim",outputs:[],stateMutability:"nonpayable",type:"function"}],C={};y("data-v-574ebbb3");const k={class:"container"},M={key:0,class:"module-approve"},A=d("p",null,"请授权 Rarity 合约后联系大聪明客服，开启躺赢模式",-1),O=b(" Approve "),S={key:1},j=d("p",null,"已经完成授权",-1),N=b(" Approved "),U=b("Cancel Approve"),B={key:1,class:"module-log"},x=d("h4",null,"批量操作，单次建议不超过30个。否则区块打包缓慢",-1),I=d("p",null,"rarity-game.netlify.app 不兼容, 因为对方的代码设计问题，会导致授权后无法查看",-1),D={class:"action-group"},J=b("批量授权 (加点/领金需要)"),$=b("批量冒险"),F=b("批量地牢"),z=b("批量升级"),H=b("批量领金"),R={class:"action-group"},W=b("批量加点"),E=b(' 1. Barbarian "野蛮人" '),P=d("br",null,null,-1),q=b(' 2. Bard "诗人" '),G=d("br",null,null,-1),K=b(' 3. Cleric "牧师" '),L=d("br",null,null,-1),Q=b(' 4. Druid "德鲁伊" '),V=d("br",null,null,-1),X=b(' 5. Fighter "战士" '),Y=d("br",null,null,-1),Z=b(' 6. Monk "僧侣" '),ee=d("br",null,null,-1),ae=b(' 7. Paladin "圣骑士" '),te=d("br",null,null,-1),ne=b(' 8. Ranger "游侠" '),le=d("br",null,null,-1),ie=b(' 9. Rogue "盗贼" '),ue=d("br",null,null,-1),se=b(' 10. Sorcerer "巫师" '),re=d("br",null,null,-1),pe=b(' 11. Wizard "法师" '),oe=d("br",null,null,-1);v();const de={props:{address:String,nftContract:Object,provider:Object},setup(y){const v=y,C=e(""),de=e(""),ye=e(""),ve=e(""),ce=e(""),be=e(""),me=e(""),we=e(""),fe=e(""),ge=e(!1),he=e(!1),Te=e(),_e=e(),Ce=e({account:!1,approve:!1,action:!1}),ke=a();t((()=>v.address),(e=>{Me()})),n((()=>{v.address&&Me()}));const Me=async()=>{const e=await v.provider.getSigner();Te.value=new w(f.NFT,g,e);try{Ce.value.approve=!0;const e=await Te.value.isApprovedForAll(v.address,f.BATCH);he.value=e,Ce.value.approve=!1}catch(a){ke.error(a.toString())}},Ae=async()=>{const e=window.ethereum?new h(window.ethereum):new T("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),a=await e.getSigner();return _e.value||(_e.value=new w(f.BATCH,_,a)),_e.value},Oe=()=>{const e=C.value.split("\n").map((e=>e.toString()));if(e.every((e=>!isNaN(parseInt(e)))))return e;throw new Error("英雄ID不正确")},Se=async()=>{ge.value=!0,fe.value="冒险中...";try{const e=await Ae(),a=Oe(),t=await e.adventure(a);await t.wait(),fe.value=`${a.join(", ")} 冒险完成`}catch(e){ke.error(JSON.stringify(e)),fe.value="冒险失败，请重试"}ge.value=!1},je=async()=>{ge.value=!0,fe.value="攻击地牢中...";try{const e=await Ae(),a=Oe(),t=await e.attackCellar(a);await t.wait(),fe.value=`${a.join(", ")} 攻击地牢完成`}catch(e){ke.error(JSON.stringify(e)),fe.value="攻击地牢失败，请重试"}ge.value=!1},Ne=async()=>{ge.value=!0,fe.value="授权中...";try{const e=await Ae(),a=Oe(),t=await e.approveBatch(a);await t.wait(),fe.value=`${a.join(", ")} 授权完成`}catch(e){ke.error(JSON.stringify(e)),fe.value="授权失败，请重试"}ge.value=!1},Ue=async()=>{ge.value=!0,fe.value="升级中...";try{const e=await Ae(),a=Oe(),t=await e.levelUp(a);await t.wait(),fe.value=`${a.join(", ")} 升级完成`}catch(e){ke.error(JSON.stringify(e)),fe.value="升级失败，请重试"}ge.value=!1},Be=async()=>{ge.value=!0,fe.value="领金中...";try{const e=await Ae(),a=Oe(),t=await e.claim(a);await t.wait(),fe.value=`${a.join(", ")} 领金完成`}catch(e){ke.error(JSON.stringify(e)),fe.value="领金失败，请重试，是否已授权？"}ge.value=!1},xe=async()=>{ge.value=!0,fe.value="设置属性中...";try{const e=await Ae(),a=Oe(),[t,n,l,i,u,s]=(()=>{const e=[de.value,ye.value,ve.value,ce.value,be.value,me.value];if(e.every((e=>!isNaN(parseInt(e)))))return e;throw new Error("英雄ID不正确")})(),r=await e.pointBuy(a,we.value,t,n,l,i,u,s);await r.wait(),fe.value=`${a.join(", ")} 设置属性完成`}catch(e){ke.error(JSON.stringify(e)),fe.value="设置属性失败，请重试，是否已授权？"}ge.value=!1};return(e,a)=>{const t=l("n-spin"),n=l("n-button"),v=l("n-input"),w=l("n-tooltip"),g=l("n-text");return c(),i("div",k,[y.address?(c(),i("div",M,[Ce.value.approve?(c(),u(t,{key:0,stroke:"#000"})):(c(),i(s,{key:1},[he.value?o("",!0):(c(),i(s,{key:0},[A,r(n,{class:"btn-approve",loading:Ce.value.action,size:"large",color:"#000",onClick:a[0]||(a[0]=e=>(async e=>{try{Ce.value.action=!0;const a=await Te.value.setApprovalForAll(f.BATCH,e);await a.wait(),Ce.value.action=!1,ke.success("授权成功"),await Me()}catch(a){ke.error(a.toString)}})(!0))},{default:p((()=>[O])),_:1},8,["loading"])],64)),he.value?(c(),i("div",S,[j,d("div",null,[r(n,{class:"btn-approve",ghost:"",size:"large",color:"#000",disabled:""},{default:p((()=>[N])),_:1}),r(n,{size:"large",onClick:a[1]||(a[1]=a=>e.unapprove(!1))},{default:p((()=>[U])),_:1})])])):o("",!0)],64))])):o("",!0),y.address&&he.value?(c(),i("div",B,[x,I,d("div",D,[r(n,{type:"primary",onClick:Ne,disabled:ge.value},{default:p((()=>[J])),_:1},8,["disabled"]),r(n,{type:"primary",onClick:Se,disabled:ge.value},{default:p((()=>[$])),_:1},8,["disabled"]),r(n,{type:"primary",onClick:je,disabled:ge.value},{default:p((()=>[F])),_:1},8,["disabled"]),r(n,{type:"primary",onClick:Ue,disabled:ge.value},{default:p((()=>[z])),_:1},8,["disabled"]),r(n,{type:"primary",onClick:Be,disabled:ge.value},{default:p((()=>[H])),_:1},8,["disabled"])]),d("div",R,[r(n,{type:"primary",onClick:xe,disabled:ge.value},{default:p((()=>[W])),_:1},8,["disabled"]),r(w,{trigger:"hover"},{trigger:p((()=>[r(v,{value:we.value,"onUpdate:value":a[2]||(a[2]=e=>we.value=e),placeholder:"英雄类型 ID",disabled:ge.value},null,8,["value","disabled"])])),default:p((()=>[E,P,q,G,K,L,Q,V,X,Y,Z,ee,ae,te,ne,le,ie,ue,se,re,pe,oe])),_:1}),r(v,{value:de.value,"onUpdate:value":a[3]||(a[3]=e=>de.value=e),placeholder:"strength",disabled:ge.value},null,8,["value","disabled"]),r(v,{value:ye.value,"onUpdate:value":a[4]||(a[4]=e=>ye.value=e),placeholder:"dexterity",disabled:ge.value},null,8,["value","disabled"]),r(v,{value:ve.value,"onUpdate:value":a[5]||(a[5]=e=>ve.value=e),placeholder:"constitution",disabled:ge.value},null,8,["value","disabled"]),r(v,{value:ce.value,"onUpdate:value":a[6]||(a[6]=e=>ce.value=e),placeholder:"intelligence",disabled:ge.value},null,8,["value","disabled"]),r(v,{value:be.value,"onUpdate:value":a[7]||(a[7]=e=>be.value=e),placeholder:"wisdom",disabled:ge.value},null,8,["value","disabled"]),r(v,{value:me.value,"onUpdate:value":a[8]||(a[8]=e=>me.value=e),placeholder:"charisma",disabled:ge.value},null,8,["value","disabled"])]),r(g,{type:"info"},{default:p((()=>[b(m(fe.value),1)])),_:1}),r(v,{value:C.value,"onUpdate:value":a[9]||(a[9]=e=>C.value=e),type:"textarea",placeholder:"英雄ID列表，一行一个",disabled:ge.value},null,8,["value","disabled"])])):o("",!0)])}}};"function"==typeof C&&C(de),de.__scopeId="data-v-574ebbb3";export{de as default};
