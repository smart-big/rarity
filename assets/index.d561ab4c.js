var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;"undefined"!=typeof require&&require;import{p as o,k as u,f as l,l as c,g as h,r as p,o as d,c as m,a as y,w as f,t as g,i as v,m as b,u as w,F as _,q as T}from"./vendor.ab79b69d.js";import{L as E,B as x,d as S,h as O,c as k,a as A,b as j,g as P,e as R,M as $,O as C,N as I,Z as M,t as N,f as U,D as F,i as L,j as D,k as B,l as z,m as H,S as G,P as J,s as V,r as q,n as W,o as K,V as X,p as Y,q as Z,u as Q,W as ee,J as te,v as ne}from"./web3-provider.8e90bd4c.js";const re=new E("abi/5.4.1"),ie={};let se={calldata:!0,memory:!0,storage:!0},ae={calldata:!0,memory:!0};function oe(e,t){if("bytes"===e||"string"===e){if(se[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&ae[t])return!0;return(se[t]||"payable"===t)&&re.throwArgumentError("invalid modifier","name",t),!1}function ue(e,t){for(let n in t)S(e,n,t[n])}const le=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),ce=new RegExp(/^(.*)\[([0-9]*)\]$/);class he{constructor(e,t){e!==ie&&re.throwError("use fromString",E.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),ue(this,t);let n=this.type.match(ce);ue(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:he.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=le.sighash),le[e]||re.throwArgumentError("invalid format type","format",e),e===le.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==le.sighash&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join(e===le.full?", ":",")+")"):t+=this.type,e!==le.sighash&&(!0===this.indexed&&(t+=" indexed"),e===le.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?he.fromString(e,t):he.fromObject(e)}static fromObject(e){return he.isParamType(e)?e:new he(ie,{name:e.name||null,type:Te(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(he.fromObject):null})}static fromString(e,t){return n=function(e,t){let n=e;function r(t){re.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let n={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(n.indexed=!1),n}e=e.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},a=s;for(let o=0;o<e.length;o++){let n=e[o];switch(n){case"(":a.state.allowType&&""===a.type?a.type="tuple":a.state.allowParams||r(o),a.state.allowType=!1,a.type=Te(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,"indexed"===a.name&&(t||r(o),a.indexed=!0,a.name=""),oe(a.type,a.name)&&(a.name=""),a.type=Te(a.type);let e=a;a=a.parent,a||r(o),delete e.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,"indexed"===a.name&&(t||r(o),a.indexed=!0,a.name=""),oe(a.type,a.name)&&(a.name=""),a.type=Te(a.type);let s=i(a.parent);a.parent.components.push(s),delete a.parent,a=s;break;case" ":a.state.allowType&&""!==a.type&&(a.type=Te(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&""!==a.name&&("indexed"===a.name?(t||r(o),a.indexed&&r(o),a.indexed=!0,a.name=""):oe(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||r(o),a.type+=n,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||r(o),a.type+=n,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=n,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=n,delete a.state.allowArray):a.state.readArray?a.type+=n:r(o)}}return a.parent&&re.throwArgumentError("unexpected eof","param",e),delete s.state,"indexed"===a.name?(t||r(n.length-7),a.indexed&&r(n.length-7),a.indexed=!0,a.name=""):oe(a.type,a.name)&&(a.name=""),s.type=Te(s.type),s}(e,!!t),he.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n}static isParamType(e){return!(null==e||!e._isParamType)}}function pe(e,t){return function(e){e=e.trim();let t=[],n="",r=0;for(let i=0;i<e.length;i++){let s=e[i];","===s&&0===r?(t.push(n),n=""):(n+=s,"("===s?r++:")"===s&&(r--,-1===r&&re.throwArgumentError("unbalanced parenthesis","value",e)))}n&&t.push(n);return t}(e).map((e=>he.fromString(e,t)))}class de{constructor(e,t){e!==ie&&re.throwError("use a static from method",E.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),ue(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return de.isFragment(e)?e:"string"==typeof e?de.fromString(e):de.fromObject(e)}static fromObject(e){if(de.isFragment(e))return e;switch(e.type){case"function":return be.fromObject(e);case"event":return me.fromObject(e);case"constructor":return ve.fromObject(e);case"error":return _e.fromObject(e);case"fallback":case"receive":return null}return re.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?me.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?be.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?ve.fromString(e.trim()):"error"===e.split(" ")[0]?_e.fromString(e.substring(5).trim()):re.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class me extends de{format(e){if(e||(e=le.sighash),le[e]||re.throwArgumentError("invalid format type","format",e),e===le.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==le.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===le.full?", ":",")+") ",e!==le.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?me.fromString(e):me.fromObject(e)}static fromObject(e){if(me.isEventFragment(e))return e;"event"!==e.type&&re.throwArgumentError("invalid event object","value",e);const t={name:xe(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(he.fromObject):[],type:"event"};return new me(ie,t)}static fromString(e){let t=e.match(Se);t||re.throwArgumentError("invalid event string","value",e);let n=!1;return t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:re.warn("unknown modifier: "+e)}})),me.fromObject({name:t[1].trim(),anonymous:n,inputs:pe(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function ye(e,t){t.gas=null;let n=e.split("@");return 1!==n.length?(n.length>2&&re.throwArgumentError("invalid human-readable ABI signature","value",e),n[1].match(/^[0-9]+$/)||re.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=x.from(n[1]),n[0]):e}function fe(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function ge(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&re.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&re.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||re.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&re.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&re.throwArgumentError("unable to determine stateMutability","value",e),t}class ve extends de{format(e){if(e||(e=le.sighash),le[e]||re.throwArgumentError("invalid format type","format",e),e===le.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});e===le.sighash&&re.throwError("cannot format a constructor for sighash",E.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===le.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?ve.fromString(e):ve.fromObject(e)}static fromObject(e){if(ve.isConstructorFragment(e))return e;"constructor"!==e.type&&re.throwArgumentError("invalid constructor object","value",e);let t=ge(e);t.constant&&re.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(he.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?x.from(e.gas):null};return new ve(ie,n)}static fromString(e){let t={type:"constructor"},n=(e=ye(e,t)).match(Se);return n&&"constructor"===n[1].trim()||re.throwArgumentError("invalid constructor string","value",e),t.inputs=pe(n[2].trim(),!1),fe(n[3].trim(),t),ve.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class be extends ve{format(e){if(e||(e=le.sighash),le[e]||re.throwArgumentError("invalid format type","format",e),e===le.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==le.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===le.full?", ":",")+") ",e!==le.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?be.fromString(e):be.fromObject(e)}static fromObject(e){if(be.isFunctionFragment(e))return e;"function"!==e.type&&re.throwArgumentError("invalid function object","value",e);let t=ge(e);const n={type:e.type,name:xe(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(he.fromObject):[],outputs:e.outputs?e.outputs.map(he.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?x.from(e.gas):null};return new be(ie,n)}static fromString(e){let t={type:"function"},n=(e=ye(e,t)).split(" returns ");n.length>2&&re.throwArgumentError("invalid function string","value",e);let r=n[0].match(Se);if(r||re.throwArgumentError("invalid function signature","value",e),t.name=r[1].trim(),t.name&&xe(t.name),t.inputs=pe(r[2],!1),fe(r[3].trim(),t),n.length>1){let r=n[1].match(Se);""==r[1].trim()&&""==r[3].trim()||re.throwArgumentError("unexpected tokens","value",e),t.outputs=pe(r[2],!1)}else t.outputs=[];return be.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function we(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||re.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class _e extends de{format(e){if(e||(e=le.sighash),le[e]||re.throwArgumentError("invalid format type","format",e),e===le.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==le.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===le.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?_e.fromString(e):_e.fromObject(e)}static fromObject(e){if(_e.isErrorFragment(e))return e;"error"!==e.type&&re.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:xe(e.name),inputs:e.inputs?e.inputs.map(he.fromObject):[]};return we(new _e(ie,t))}static fromString(e){let t={type:"error"},n=e.match(Se);return n||re.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&xe(t.name),t.inputs=pe(n[2],!1),we(_e.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function Te(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const Ee=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function xe(e){return e&&e.match(Ee)||re.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const Se=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");const Oe=new E("abi/5.4.1");class ke{constructor(e,t,n,r){this.name=e,this.type=t,this.localName=n,this.dynamic=r}_throwError(e,t){Oe.throwArgumentError(e,this.localName,t)}}class Ae{constructor(e){S(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return O(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(k(e._data))}writeBytes(e){let t=A(e);const n=t.length%this.wordSize;return n&&(t=k([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=A(x.from(e));return t.length>this.wordSize&&Oe.throwError("value out-of-bounds",E.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=k([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class je{constructor(e,t,n,r){S(this,"_data",A(e)),S(this,"wordSize",t||32),S(this,"_coerceFunc",n),S(this,"allowLoose",r),this._offset=0}get data(){return j(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):je.coerce(e,t)}_peekBytes(e,t,n){let r=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+r>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?r=t:Oe.throwError("data out-of-bounds",E.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})),this._data.slice(this._offset,this._offset+r)}subReader(e){return new je(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return x.from(this.readBytes(this.wordSize))}}class Pe extends ke{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=P(t)}catch(n){this._throwError(n.message,t)}return e.writeValue(t)}decode(e){return P(R(e.readValue().toHexString(),20))}}class Re extends ke{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const $e=new E("abi/5.4.1");function Ce(e,t,n){let r=null;if(Array.isArray(n))r=n;else if(n&&"object"==typeof n){let e={};r=t.map((t=>{const r=t.localName;return r||$e.throwError("cannot encode object for signature with missing names",E.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]&&$e.throwError("cannot encode object for signature with duplicate names",E.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]=!0,n[r]}))}else $e.throwArgumentError("invalid tuple value","tuple",n);t.length!==r.length&&$e.throwArgumentError("types/value length mismatch","tuple",n);let i=new Ae(e.wordSize),s=new Ae(e.wordSize),a=[];t.forEach(((e,t)=>{let n=r[t];if(e.dynamic){let t=s.length;e.encode(s,n);let r=i.writeUpdatableValue();a.push((e=>{r(e+t)}))}else e.encode(i,n)})),a.forEach((e=>{e(i.length)}));let o=e.appendWriter(i);return o+=e.appendWriter(s),o}function Ie(e,t){let n=[],r=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readValue(),a=r.subReader(n.toNumber());try{i=t.decode(a)}catch(s){if(s.code===E.errors.BUFFER_OVERRUN)throw s;i=s,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(s){if(s.code===E.errors.BUFFER_OVERRUN)throw s;i=s,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&n.push(i)}));const i=t.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});t.forEach(((e,t)=>{let r=e.localName;if(!r||1!==i[r])return;if("length"===r&&(r="_length"),null!=n[r])return;const s=n[t];s instanceof Error?Object.defineProperty(n,r,{enumerable:!0,get:()=>{throw s}}):n[r]=s}));for(let s=0;s<n.length;s++){const e=n[s];e instanceof Error&&Object.defineProperty(n,s,{enumerable:!0,get:()=>{throw e}})}return Object.freeze(n)}class Me extends ke{constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;-1===n&&(n=t.length,e.writeValue(t.length)),$e.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let i=0;i<t.length;i++)r.push(this.coder);return Ce(e,r,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&$e.throwError("insufficient data length",E.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let r=0;r<t;r++)n.push(new Re(this.coder));return e.coerce(this.name,Ie(e,n))}}class Ne extends ke{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Ue extends ke{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=A(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Fe extends Ue{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,j(super.decode(e)))}}class Le extends ke{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=A(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,j(e.readBytes(this.size)))}}class De extends ke{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class Be extends ke{constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=x.from(t),r=$.mask(8*e.wordSize);if(this.signed){let e=r.mask(8*this.size-1);(n.gt(e)||n.lt(e.add(C).mul(I)))&&this._throwError("value out-of-bounds",t)}else(n.lt(M)||n.gt(r.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(8*this.size).mask(8*this.size),this.signed&&(n=n.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class ze extends Ue{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,N(t))}decode(e){return U(super.decode(e))}}class He extends ke{constructor(e,t){let n=!1;const r=[];e.forEach((e=>{e.dynamic&&(n=!0),r.push(e.type)}));super("tuple","tuple("+r.join(",")+")",t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,r)=>{let i=n.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[r]))})),Object.freeze(e)}encode(e,t){return Ce(e,this.coders,t)}decode(e){return e.coerce(this.name,Ie(e,this.coders))}}const Ge=new E("abi/5.4.1"),Je=new RegExp(/^bytes([0-9]*)$/),Ve=new RegExp(/^(u?int)([0-9]*)$/);class qe{constructor(e){Ge.checkNew(new.target,qe),S(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Pe(e.name);case"bool":return new Ne(e.name);case"string":return new ze(e.name);case"bytes":return new Fe(e.name);case"array":return new Me(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new He((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new De(e.name)}let t=e.type.match(Ve);if(t){let n=parseInt(t[2]||"256");return(0===n||n>256||n%8!=0)&&Ge.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Be(n/8,"int"===t[1],e.name)}if(t=e.type.match(Je),t){let n=parseInt(t[1]);return(0===n||n>32)&&Ge.throwArgumentError("invalid bytes length","param",e),new Le(n,e.name)}return Ge.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new je(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Ae(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(he.from(e))));return new He(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Ge.throwError("types/values length mismatch",E.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map((e=>this._getCoder(he.from(e)))),r=new He(n,"_"),i=this._getWriter();return r.encode(i,t),i.data}decode(e,t,n){const r=e.map((e=>this._getCoder(he.from(e))));return new He(r,"_").decode(this._getReader(A(t),n))}}const We=new qe,Ke=new E("abi/5.4.1");class Xe extends F{}class Ye extends F{}class Ze extends F{}class Qe extends F{static isIndexed(e){return!(!e||!e._isIndexed)}}const et={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function tt(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return n.error=t,n}class nt{constructor(e){Ke.checkNew(new.target,nt);let t=[];t="string"==typeof e?JSON.parse(e):e,S(this,"fragments",t.map((e=>de.from(e))).filter((e=>null!=e))),S(this,"_abiCoder",L(new.target,"getAbiCoder")()),S(this,"functions",{}),S(this,"errors",{}),S(this,"events",{}),S(this,"structs",{}),this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void Ke.warn("duplicate definition - constructor"):void S(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let n=e.format();t[n]?Ke.warn("duplicate definition - "+n):t[n]=e})),this.deploy||S(this,"deploy",ve.from({payable:!1,type:"constructor"})),S(this,"_isInterface",!0)}format(e){e||(e=le.full),e===le.sighash&&Ke.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map((t=>t.format(e)));return e===le.json?JSON.stringify(t.map((e=>JSON.parse(e)))):t}static getAbiCoder(){return We}static getAddress(e){return P(e)}static getSighash(e){return D(B(e.format()),0,4)}static getEventTopic(e){return B(e.format())}getFunction(e){if(z(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];Ke.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));return 0===n.length?Ke.throwArgumentError("no matching function","name",t):n.length>1&&Ke.throwArgumentError("multiple matching functions","name",t),this.functions[n[0]]}const t=this.functions[be.fromString(e).format()];return t||Ke.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(z(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];Ke.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.events).filter((e=>e.split("(")[0]===t));return 0===n.length?Ke.throwArgumentError("no matching event","name",t):n.length>1&&Ke.throwArgumentError("multiple matching events","name",t),this.events[n[0]]}const t=this.events[me.fromString(e).format()];return t||Ke.throwArgumentError("no matching event","signature",e),t}getError(e){if(z(e)){const t=L(this.constructor,"getSighash");for(const n in this.errors){if(e===t(this.errors[n]))return this.errors[n]}Ke.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));return 0===n.length?Ke.throwArgumentError("no matching error","name",t):n.length>1&&Ke.throwArgumentError("multiple matching errors","name",t),this.errors[n[0]]}const t=this.errors[be.fromString(e).format()];return t||Ke.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(n){throw t}}return L(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),L(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const n=A(t);return j(n.slice(0,4))!==this.getSighash(e)&&Ke.throwArgumentError(`data signature does not match error ${e.name}.`,"data",j(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),j(k([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const n=A(t);return j(n.slice(0,4))!==this.getSighash(e)&&Ke.throwArgumentError(`data signature does not match function ${e.name}.`,"data",j(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),j(k([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let n=A(t),r=null,i=null,s=null,a=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch(o){}break;case 4:{const e=j(n.slice(0,4)),t=et[e];if(t)i=this._abiCoder.decode(t.inputs,n.slice(4)),s=t.name,a=t.signature,t.reason&&(r=i[0]);else try{const t=this.getError(e);i=this._abiCoder.decode(t.inputs,n.slice(4)),s=t.name,a=t.format()}catch(o){console.log(o)}break}}return Ke.throwError("call revert exception",E.errors.CALL_EXCEPTION,{method:e.format(),errorArgs:i,errorName:s,errorSignature:a,reason:r})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),j(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&Ke.throwError("too many arguments for "+e.format(),E.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let n=[];e.anonymous||n.push(this.getEventTopic(e));const r=(e,t)=>"string"===e.type?B(t):"bytes"===e.type?H(j(t)):("address"===e.type&&this._abiCoder.encode(["address"],[t]),R(j(t),32));for(t.forEach(((t,i)=>{let s=e.inputs[i];s.indexed?null==t?n.push(null):"array"===s.baseType||"tuple"===s.baseType?Ke.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?n.push(t.map((e=>r(s,e)))):n.push(r(s,t)):null!=t&&Ke.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const n=[],r=[],i=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Ke.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach(((e,s)=>{const a=t[s];if(e.indexed)if("string"===e.type)n.push(B(a));else if("bytes"===e.type)n.push(H(a));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this._abiCoder.encode([e.type],[a]))}else r.push(e),i.push(a)})),{data:this._abiCoder.encode(r,i),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e&&(e=this.getEvent(e)),null!=n&&!e.anonymous){let t=this.getEventTopic(e);z(n[0],32)&&n[0].toLowerCase()===t||Ke.throwError("fragment/topic mismatch",E.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:n[0]}),n=n.slice(1)}let r=[],i=[],s=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(he.fromObject({type:"bytes32",name:e.name})),s.push(!0)):(r.push(e),s.push(!1)):(i.push(e),s.push(!1))}));let a=null!=n?this._abiCoder.decode(r,k(n)):null,o=this._abiCoder.decode(i,t,!0),u=[],l=0,c=0;e.inputs.forEach(((e,t)=>{if(e.indexed)if(null==a)u[t]=new Qe({_isIndexed:!0,hash:null});else if(s[t])u[t]=new Qe({_isIndexed:!0,hash:a[c++]});else try{u[t]=a[c++]}catch(n){u[t]=n}else try{u[t]=o[l++]}catch(n){u[t]=n}if(e.name&&null==u[e.name]){const n=u[t];n instanceof Error?Object.defineProperty(u,e.name,{enumerable:!0,get:()=>{throw tt(`property ${JSON.stringify(e.name)}`,n)}}):u[e.name]=n}}));for(let h=0;h<u.length;h++){const e=u[h];e instanceof Error&&Object.defineProperty(u,h,{enumerable:!0,get:()=>{throw tt(`index ${h}`,e)}})}return Object.freeze(u)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Ye({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:x.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Xe({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=j(e);let n=this.getError(t.substring(0,10).toLowerCase());return n?new Ze({args:this._abiCoder.decode(n.inputs,"0x"+t.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!(!e||!e._isInterface)}}var rt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};const it=new E("contracts/5.4.1");function st(e,t){return rt(this,void 0,void 0,(function*(){const n=yield t;try{return P(n)}catch(i){}e||it.throwError("a provider or signer is needed to resolve ENS names",E.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield e.resolveName(n);return null==r&&it.throwArgumentError("resolver or addr is not configured for ENS name","name",n),r}))}function at(e,t,n){return rt(this,void 0,void 0,(function*(){return Array.isArray(n)?yield Promise.all(n.map(((n,r)=>at(e,Array.isArray(t)?t[r]:t[n.name],n)))):"address"===n.type?yield st(e,t):"tuple"===n.type?yield at(e,t,n.components):"array"===n.baseType?Array.isArray(t)?yield Promise.all(t.map((t=>at(e,t,n.arrayChildren)))):Promise.reject(new Error("invalid value for array")):t}))}function ot(e,t,n){return rt(this,void 0,void 0,(function*(){let r={};n.length===t.inputs.length+1&&"object"==typeof n[n.length-1]&&(r=V(n.pop())),it.checkArgumentCount(n.length,t.inputs.length,"passed to contract"),e.signer?r.from?r.from=q({override:st(e.signer,r.from),signer:e.signer.getAddress()}).then((e=>rt(this,void 0,void 0,(function*(){return P(e.signer)!==e.override&&it.throwError("Contract with a Signer cannot override from",E.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.override})))):r.from=e.signer.getAddress():r.from&&(r.from=st(e.provider,r.from));const i=yield q({args:at(e.signer||e.provider,n,t.inputs),address:e.resolvedAddress,overrides:q(r)||{}}),s=e.interface.encodeFunctionData(t,i.args),a={data:s,to:i.address},o=i.overrides;if(null!=o.nonce&&(a.nonce=x.from(o.nonce).toNumber()),null!=o.gasLimit&&(a.gasLimit=x.from(o.gasLimit)),null!=o.gasPrice&&(a.gasPrice=x.from(o.gasPrice)),null!=o.maxFeePerGas&&(a.maxFeePerGas=x.from(o.maxFeePerGas)),null!=o.maxPriorityFeePerGas&&(a.maxPriorityFeePerGas=x.from(o.maxPriorityFeePerGas)),null!=o.from&&(a.from=o.from),null!=o.type&&(a.type=o.type),null!=o.accessList&&(a.accessList=W(o.accessList)),null==a.gasLimit&&null!=t.gas){let e=21e3;const n=A(s);for(let t=0;t<n.length;t++)e+=4,n[t]&&(e+=64);a.gasLimit=x.from(t.gas).add(e)}if(o.value){const e=x.from(o.value);e.isZero()||t.payable||it.throwError("non-payable method cannot override value",E.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),a.value=e}delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas;const u=Object.keys(r).filter((e=>null!=r[e]));return u.length&&it.throwError(`cannot override ${u.map((e=>JSON.stringify(e))).join(",")}`,E.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:u}),a}))}function ut(e,t,n){const r=e.signer||e.provider;return function(...i){return rt(this,void 0,void 0,(function*(){let s;if(i.length===t.inputs.length+1&&"object"==typeof i[i.length-1]){const e=V(i.pop());null!=e.blockTag&&(s=yield e.blockTag),delete e.blockTag,i.push(e)}null!=e.deployTransaction&&(yield e._deployed(s));const a=yield ot(e,t,i),o=yield r.call(a,s);try{let r=e.interface.decodeFunctionResult(t,o);return n&&1===t.outputs.length&&(r=r[0]),r}catch(u){throw u.code===E.errors.CALL_EXCEPTION&&(u.address=e.address,u.args=i,u.transaction=a),u}}))}}function lt(e,t,n){return t.constant?ut(e,t,n):function(e,t){return function(...n){return rt(this,void 0,void 0,(function*(){e.signer||it.throwError("sending a transaction requires a signer",E.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=e.deployTransaction&&(yield e._deployed());const r=yield ot(e,t,n),i=yield e.signer.sendTransaction(r),s=i.wait.bind(i);return i.wait=t=>s(t).then((t=>(t.events=t.logs.map((n=>{let r=Y(n),i=null;try{i=e.interface.parseLog(n)}catch(s){}return i&&(r.args=i.args,r.decode=(t,n)=>e.interface.decodeEventLog(i.eventFragment,t,n),r.event=i.name,r.eventSignature=i.signature),r.removeListener=()=>e.provider,r.getBlock=()=>e.provider.getBlock(t.blockHash),r.getTransaction=()=>e.provider.getTransaction(t.transactionHash),r.getTransactionReceipt=()=>Promise.resolve(t),r})),t))),i}))}}(e,t)}function ct(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((e=>Array.isArray(e)?e.join("|"):e)).join(":"):""):"*"}class ht{constructor(e,t){S(this,"tag",e),S(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter((n=>!(!t&&n.listener===e)||(t=!0,!1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((e=>e.listener))}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter((t=>{const n=e.slice();return setTimeout((()=>{t.listener.apply(this,n)}),0),!t.once})),t}prepareEvent(e){}getEmit(e){return[e]}}class pt extends ht{constructor(){super("error",null)}}class dt extends ht{constructor(e,t,n,r){const i={address:e};let s=t.getEventTopic(n);r?(s!==r[0]&&it.throwArgumentError("topic mismatch","topics",r),i.topics=r.slice()):i.topics=[s],super(ct(i),i),S(this,"address",e),S(this,"interface",t),S(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=function(e){const t=[],n=function(e,r){if(Array.isArray(r))for(let s in r){const a=e.slice();a.push(s);try{n(a,r[s])}catch(i){t.push({path:a,error:i})}}};return n([],e),t}(e.args);if(t.length)throw t[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class mt extends ht{constructor(e,t){super("*",{address:e}),S(this,"address",e),S(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(e,n)=>this.interface.decodeEventLog(t.eventFragment,e,n),e.args=t.args}catch(t){}}}class yt extends class{constructor(e,t,n){it.checkNew(new.target,yt),S(this,"interface",L(new.target,"getInterface")(t)),null==n?(S(this,"provider",null),S(this,"signer",null)):G.isSigner(n)?(S(this,"provider",n.provider||null),S(this,"signer",n)):J.isProvider(n)?(S(this,"provider",n),S(this,"signer",null)):it.throwArgumentError("invalid signer or provider","signerOrProvider",n),S(this,"callStatic",{}),S(this,"estimateGas",{}),S(this,"functions",{}),S(this,"populateTransaction",{}),S(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach((t=>{const n=this.interface.events[t];S(this.filters,t,((...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(n,e)}))),e[n.name]||(e[n.name]=[]),e[n.name].push(t)})),Object.keys(e).forEach((t=>{const n=e[t];1===n.length?S(this.filters,t,this.filters[n[0]]):it.warn(`Duplicate definition of ${t} (${n.join(", ")})`)}))}if(S(this,"_runningEvents",{}),S(this,"_wrappedEmits",{}),null==e&&it.throwArgumentError("invalid contract address or ENS name","addressOrName",e),S(this,"address",e),this.provider)S(this,"resolvedAddress",st(this.provider,e));else try{S(this,"resolvedAddress",Promise.resolve(P(e)))}catch(s){it.throwError("provider is required to use ENS name as contract address",E.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}const r={},i={};Object.keys(this.interface.functions).forEach((e=>{const t=this.interface.functions[e];if(i[e])it.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);else{i[e]=!0;{const n=t.name;r[n]||(r[n]=[]),r[n].push(e)}null==this[e]&&S(this,e,lt(this,t,!0)),null==this.functions[e]&&S(this.functions,e,lt(this,t,!1)),null==this.callStatic[e]&&S(this.callStatic,e,ut(this,t,!0)),null==this.populateTransaction[e]&&S(this.populateTransaction,e,function(e,t){return function(...n){return ot(e,t,n)}}(this,t)),null==this.estimateGas[e]&&S(this.estimateGas,e,function(e,t){const n=e.signer||e.provider;return function(...r){return rt(this,void 0,void 0,(function*(){n||it.throwError("estimate require a provider or signer",E.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield ot(e,t,r);return yield n.estimateGas(i)}))}}(this,t))}})),Object.keys(r).forEach((e=>{const t=r[e];if(t.length>1)return;const n=t[0];try{null==this[e]&&S(this,e,this[n])}catch(i){}null==this.functions[e]&&S(this.functions,e,this.functions[n]),null==this.callStatic[e]&&S(this.callStatic,e,this.callStatic[n]),null==this.populateTransaction[e]&&S(this.populateTransaction,e,this.populateTransaction[n]),null==this.estimateGas[e]&&S(this.estimateGas,e,this.estimateGas[n])}))}static getContractAddress(e){return K(e)}static getInterface(e){return nt.isInterface(e)?e:new nt(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,e).then((e=>("0x"===e&&it.throwError("contract not deployed",E.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(e){this.signer||it.throwError("sending a transactions require a signer",E.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=V(e||{});return["from","to"].forEach((function(e){null!=t[e]&&it.throwError("cannot override "+e,E.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(t)))}connect(e){"string"==typeof e&&(e=new X(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&S(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Qe.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new pt);if("event"===e)return this._normalizeRunningEvent(new ht("event",null));if("*"===e)return this._normalizeRunningEvent(new mt(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new dt(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if("string"!=typeof t)throw new Error("invalid topic");const n=this.interface.getEvent(t);return this._normalizeRunningEvent(new dt(this.address,this.interface,n,e.topics))}catch(t){}const n={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new ht(ct(n),n))}return this._normalizeRunningEvent(new mt(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,n){const r=Y(t);return r.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},r.getBlock=()=>this.provider.getBlock(t.blockHash),r.getTransaction=()=>this.provider.getTransaction(t.transactionHash),r.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(r),r}_addEventListener(e,t,n){if(this.provider||it.throwError("events require a provider or a signer with a provider",E.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const n=n=>{let r=this._wrapEvent(e,n,t);if(null==r.decodeError)try{const t=e.getEmit(r);this.emit(e.filter,...t)}catch(i){r.decodeError=i.error}null!=e.filter&&this.emit("event",r),null!=r.decodeError&&this.emit("error",r.decodeError,r)};this._wrappedEmits[e.tag]=n,null!=e.filter&&this.provider.on(e.filter,n)}}queryFilter(e,t,n){const r=this._getRunningEvent(e),i=V(r.filter);return"string"==typeof t&&z(t,32)?(null!=n&&it.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),i.blockHash=t):(i.fromBlock=null!=t?t:0,i.toBlock=null!=n?n:"latest"),this.provider.getLogs(i).then((e=>e.map((e=>this._wrapEvent(r,e,null)))))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const n=this._getRunningEvent(e),r=n.run(t)>0;return this._checkRunningEvents(n),r}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce(((e,t)=>e+this._runningEvents[t].listenerCount()),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){const e=[];for(let t in this._runningEvents)this._runningEvents[t].listeners().forEach((t=>{e.push(t)}));return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners(),this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(t),this._checkRunningEvents(n),this}removeListener(e,t){return this.off(e,t)}}{}const ft="0x2069B76Afe6b734Fb65D1d099E7ec64ee9CC76B2",gt="0xB5F5AF1087A8DA62A23b08C00C6ec9af21F397a1",vt="0x2A0F1cB17680161cF255348dDFDeE94ea8Ca196A",bt="0xce761d788df608bd21bdd59d6f4b54b2e27f25bb",wt="0x8c6092d6e814c1b98beca5783cfcbca75d930dd8",_t={"X-Client-Info":"supabase-js/1.22.6"};var Tt={exports:{}};!function(e,t){var n,r="undefined"!=typeof self?self:Q,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();n=i,function(e){var t="URLSearchParams"in n,r="Symbol"in n&&"iterator"in Symbol,i="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in n,a="ArrayBuffer"in n;if(a)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var n;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=m(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=l(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[l(e)]},p.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},p.prototype.set=function(e,t){this.map[l(e)]=c(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];_.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch(x){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(t,n){return new Promise((function(r,s){var a=new b(t,n);if(a.signal&&a.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function u(){o.abort()}o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;r(new _(i,n))},o.onerror=function(){s(new TypeError("Network request failed"))},o.ontimeout=function(){s(new TypeError("Network request failed"))},o.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},o.open(a.method,a.url,!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&i&&(o.responseType="blob"),a.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",u),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",u)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}E.polyfill=!0,n.fetch||(n.fetch=E,n.Headers=p,n.Request=b,n.Response=_),e.Headers=p,e.Request=b,e.Response=_,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})}({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t}(Tt,Tt.exports);var Et=Z(Tt.exports),xt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};const St=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function Ot(e,t,n,r){return xt(this,void 0,void 0,(function*(){return new Promise(((i,s)=>{Et(t,((e,t,n)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e||(r.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(n)),r})(e,n,r)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?i:e.json()})).then((e=>i(e))).catch((e=>((e,t)=>{if("function"!=typeof e.json)return t(e);e.json().then((n=>t({message:St(n),status:(null==e?void 0:e.status)||500})))})(e,s)))}))}))}function kt(e,t,n){return xt(this,void 0,void 0,(function*(){return Ot("POST",e,n,t)}))}const At={"X-Client-Info":"gotrue-js/1.17.1"},jt="supabase.auth.token",Pt={name:"sb:token",lifetime:28800,domain:"",path:"/",sameSite:"lax"};function Rt(e,t){var n,r,i;return function(e,t,n){const r=n||{},i=encodeURIComponent,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");const a=i(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");let o=e+"="+a;if(null!=r.maxAge){const e=r.maxAge-0;if(isNaN(e)||!isFinite(e))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(e)}if(r.domain){if(!s.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!s.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}(e.name,e.value,{maxAge:e.maxAge,expires:new Date(Date.now()+1e3*e.maxAge),httpOnly:!0,secure:t,path:null!==(n=e.path)&&void 0!==n?n:"/",domain:null!==(r=e.domain)&&void 0!==r?r:"",sameSite:null!==(i=e.sameSite)&&void 0!==i?i:"lax"})}function $t(e,t,n){const r=n.map((t=>Rt(t,function(e){if(!e||!e.headers||!e.headers.host)throw new Error('The "host" request header is not available');const t=e.headers.host.indexOf(":")>-1&&e.headers.host.split(":")[0]||e.headers.host;return!(["localhost","127.0.0.1"].indexOf(t)>-1||t.endsWith(".local"))}(e)))),i=t.getHeader("Set-Cookie");i&&(i instanceof Array?Array.prototype.push.apply(r,i):"string"==typeof i&&r.push(i)),t.setHeader("Set-Cookie",r)}function Ct(e,t,n){$t(e,t,[n])}function It(e){return Math.round(Date.now()/1e3)+e}const Mt=()=>"undefined"!=typeof window;function Nt(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var Ut=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};class Ft{constructor({url:e="",headers:t={},cookieOptions:n}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},Pt),n)}signUpWithEmail(e,t,n={}){return Ut(this,void 0,void 0,(function*(){try{let r=Object.assign({},this.headers),i="";n.redirectTo&&(i="?redirect_to="+encodeURIComponent(n.redirectTo));const s=yield kt(`${this.url}/signup${i}`,{email:e,password:t},{headers:r});let a=Object.assign({},s);return a.expires_in&&(a.expires_at=It(s.expires_in)),{data:a,error:null}}catch(r){return{data:null,error:r}}}))}signInWithEmail(e,t,n={}){return Ut(this,void 0,void 0,(function*(){try{let r=Object.assign({},this.headers),i="?grant_type=password";n.redirectTo&&(i+="&redirect_to="+encodeURIComponent(n.redirectTo));const s=yield kt(`${this.url}/token${i}`,{email:e,password:t},{headers:r});let a=Object.assign({},s);return a.expires_in&&(a.expires_at=It(s.expires_in)),{data:a,error:null}}catch(r){return{data:null,error:r}}}))}signUpWithPhone(e,t){return Ut(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers);const r=yield kt(`${this.url}/signup`,{phone:e,password:t},{headers:n});let i=Object.assign({},r);return i.expires_in&&(i.expires_at=It(r.expires_in)),{data:i,error:null}}catch(n){return{data:null,error:n}}}))}signInWithPhone(e,t){return Ut(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="?grant_type=password";const i=yield kt(`${this.url}/token${r}`,{phone:e,password:t},{headers:n});let s=Object.assign({},i);return s.expires_in&&(s.expires_at=It(i.expires_in)),{data:s,error:null}}catch(n){return{data:null,error:n}}}))}sendMagicLinkEmail(e,t={}){return Ut(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="";t.redirectTo&&(r+="?redirect_to="+encodeURIComponent(t.redirectTo));return{data:yield kt(`${this.url}/magiclink${r}`,{email:e},{headers:n}),error:null}}catch(n){return{data:null,error:n}}}))}sendMobileOTP(e){return Ut(this,void 0,void 0,(function*(){try{let t=Object.assign({},this.headers);return{data:yield kt(`${this.url}/otp`,{phone:e},{headers:t}),error:null}}catch(t){return{data:null,error:t}}}))}verifyMobileOTP(e,t,n={}){return Ut(this,void 0,void 0,(function*(){try{let r=Object.assign({},this.headers);return{data:yield kt(`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:n.redirectTo},{headers:r}),error:null}}catch(r){return{data:null,error:r}}}))}inviteUserByEmail(e,t={}){return Ut(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="";t.redirectTo&&(r+="?redirect_to="+encodeURIComponent(t.redirectTo));return{data:yield kt(`${this.url}/invite${r}`,{email:e},{headers:n}),error:null}}catch(n){return{data:null,error:n}}}))}resetPasswordForEmail(e,t={}){return Ut(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="";t.redirectTo&&(r+="?redirect_to="+encodeURIComponent(t.redirectTo));return{data:yield kt(`${this.url}/recover${r}`,{email:e},{headers:n}),error:null}}catch(n){return{data:null,error:n}}}))}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}signOut(e){return Ut(this,void 0,void 0,(function*(){try{return yield kt(`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}}))}getUrlForProvider(e,t){let n=[`provider=${encodeURIComponent(e)}`];return(null==t?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),`${this.url}/authorize?${n.join("&")}`}getUser(e){return Ut(this,void 0,void 0,(function*(){try{const t=yield function(e,t){return xt(this,void 0,void 0,(function*(){return Ot("GET",e,t)}))}(`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}}))}updateUser(e,t){return Ut(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n){return xt(this,void 0,void 0,(function*(){return Ot("PUT",e,n,t)}))}(`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}}))}deleteUser(e,t){return Ut(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n){return xt(this,void 0,void 0,(function*(){return Ot("DELETE",e,n,t)}))}(`${this.url}/admin/users/${e}`,{},{headers:this._createRequestHeaders(t)});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}}))}refreshAccessToken(e){return Ut(this,void 0,void 0,(function*(){try{const t=yield kt(`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers});let n=Object.assign({},t);return n.expires_in&&(n.expires_at=It(t.expires_in)),{data:n,error:null}}catch(t){return{data:null,error:t}}}))}setAuthCookie(e,t){"POST"!==e.method&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:n,session:r}=e.body;if(!n)throw new Error("Auth event missing!");if("SIGNED_IN"===n){if(!r)throw new Error("Auth session missing!");Ct(e,t,{name:this.cookieOptions.name,value:r.access_token,domain:this.cookieOptions.domain,maxAge:this.cookieOptions.lifetime,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite})}"SIGNED_OUT"===n&&function(e,t,n){Ct(e,t,{name:n,value:"",maxAge:-1})}(e,t,this.cookieOptions.name),t.status(200).json({})}getUserByCookie(e){return Ut(this,void 0,void 0,(function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");if(!e.cookies[this.cookieOptions.name])throw new Error("No cookie found!");const t=e.cookies[this.cookieOptions.name],{user:n,error:r}=yield this.getUser(t);if(r)throw r;return{user:n,data:n,error:null}}catch(t){return{user:null,data:null,error:t}}}))}generateLink(e,t,n={}){return Ut(this,void 0,void 0,(function*(){try{return{data:yield kt(`${this.url}/admin/generate_link`,{type:e,email:t,password:n.password,data:n.data,redirect_to:n.redirectTo},{headers:this.headers}),error:null}}catch(r){return{data:null,error:r}}}))}}var Lt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Dt={url:"http://localhost:9999",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:At};class Bt extends class{constructor(e){this.stateChangeEmitters=new Map;const t=Object.assign(Object.assign({},Dt),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new Ft({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions}),this._recoverSession(),this._recoverAndRefresh();try{t.detectSessionInUrl&&Mt()&&Nt("access_token")&&this.getSessionFromUrl({storeSession:!0})}catch(n){console.log("Error getting session from URL.")}}signUp({email:e,password:t,phone:n},r={}){return Lt(this,void 0,void 0,(function*(){try{this._removeSession();const{data:i,error:s}=n&&t?yield this.api.signUpWithPhone(n,t):yield this.api.signUpWithEmail(e,t,{redirectTo:r.redirectTo});if(s)throw s;if(!i)throw"An error occurred on sign up.";let a=null,o=null;return i.access_token&&(a=i,o=a.user,this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),i.id&&(o=i),{data:i,user:o,session:a,error:null}}catch(i){return{data:null,user:null,session:null,error:i}}}))}signIn({email:e,phone:t,password:n,refreshToken:r,provider:i},s={}){return Lt(this,void 0,void 0,(function*(){try{if(this._removeSession(),e&&!n){const{error:t}=yield this.api.sendMagicLinkEmail(e,{redirectTo:s.redirectTo});return{data:null,user:null,session:null,error:t}}if(e&&n)return this._handleEmailSignIn(e,n,{redirectTo:s.redirectTo});if(t&&!n){const{error:e}=yield this.api.sendMobileOTP(t);return{data:null,user:null,session:null,error:e}}if(t&&n)return this._handlePhoneSignIn(t,n);if(r){const{error:e}=yield this._callRefreshToken(r);if(e)throw e;return{data:this.currentSession,user:this.currentUser,session:this.currentSession,error:null}}if(i)return this._handleProviderSignIn(i,{redirectTo:s.redirectTo,scopes:s.scopes});throw new Error("You must provide either an email, phone number or a third-party provider.")}catch(a){return{data:null,user:null,session:null,error:a}}}))}verifyOTP({phone:e,token:t},n={}){return Lt(this,void 0,void 0,(function*(){try{this._removeSession();const{data:r,error:i}=yield this.api.verifyMobileOTP(e,t,n);if(i)throw i;if(!r)throw"An error occurred on token verification.";let s=null,a=null;return r.access_token&&(s=r,a=s.user,this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),r.id&&(a=r),{data:r,user:a,session:s,error:null}}catch(r){return{data:null,user:null,session:null,error:r}}}))}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return Lt(this,void 0,void 0,(function*(){try{if(!(null===(e=this.currentSession)||void 0===e?void 0:e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}}))}update(e){var t;return Lt(this,void 0,void 0,(function*(){try{if(!(null===(t=this.currentSession)||void 0===t?void 0:t.access_token))throw new Error("Not logged in.");const{user:n,error:r}=yield this.api.updateUser(this.currentSession.access_token,e);if(r)throw r;if(!n)throw Error("Invalid user data.");const i=Object.assign(Object.assign({},this.currentSession),{user:n});return this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED"),{data:n,user:n,error:null}}catch(n){return{data:null,user:null,error:n}}}))}setSession(e){return Lt(this,void 0,void 0,(function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:n}=yield this.api.refreshAccessToken(e);return n?{session:null,error:n}:t?(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null}):{session:null,error:{name:"Invalid refresh_token",message:"JWT token provided is Invalid"}}}catch(t){return{error:t,session:null}}}))}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:null}),this.currentSession}getSessionFromUrl(e){return Lt(this,void 0,void 0,(function*(){try{if(!Mt())throw new Error("No browser detected.");const t=Nt("error_description");if(t)throw new Error(t);const n=Nt("provider_token"),r=Nt("access_token");if(!r)throw new Error("No access_token detected.");const i=Nt("expires_in");if(!i)throw new Error("No expires_in detected.");const s=Nt("refresh_token");if(!s)throw new Error("No refresh_token detected.");const a=Nt("token_type");if(!a)throw new Error("No token_type detected.");const o=Math.round(Date.now()/1e3)+parseInt(i),{user:u,error:l}=yield this.api.getUser(r);if(l)throw l;const c={provider_token:n,access_token:r,expires_in:parseInt(i),expires_at:o,refresh_token:s,token_type:a,user:u};return(null==e?void 0:e.storeSession)&&(this._saveSession(c),this._notifyAllSubscribers("SIGNED_IN"),"recovery"===Nt("type")&&this._notifyAllSubscribers("PASSWORD_RECOVERY")),window.location.hash="",{data:c,error:null}}catch(t){return{data:null,error:t}}}))}signOut(){var e;return Lt(this,void 0,void 0,(function*(){const t=null===(e=this.currentSession)||void 0===e?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:e}=yield this.api.signOut(t);if(e)return{error:e}}return{error:null}}))}onAuthStateChange(e){try{const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n=this,r={id:t,callback:e,unsubscribe:()=>{n.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:r,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,n={}){var r,i;return Lt(this,void 0,void 0,(function*(){try{const{data:s,error:a}=yield this.api.signInWithEmail(e,t,{redirectTo:n.redirectTo});return a||!s?{data:null,user:null,session:null,error:a}:(((null===(r=null==s?void 0:s.user)||void 0===r?void 0:r.confirmed_at)||(null===(i=null==s?void 0:s.user)||void 0===i?void 0:i.email_confirmed_at))&&(this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),{data:s,user:s.user,session:s,error:null})}catch(s){return{data:null,user:null,session:null,error:s}}}))}_handlePhoneSignIn(e,t){var n;return Lt(this,void 0,void 0,(function*(){try{const{data:r,error:i}=yield this.api.signInWithPhone(e,t);return i||!r?{data:null,user:null,session:null,error:i}:((null===(n=null==r?void 0:r.user)||void 0===n?void 0:n.phone_confirmed_at)&&(this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN")),{data:r,user:r.user,session:r,error:null})}catch(r){return{data:null,user:null,session:null,error:r}}}))}_handleProviderSignIn(e,t={}){const n=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes});try{return Mt()&&(window.location.href=n),{provider:e,url:n,data:null,session:null,user:null,error:null}}catch(r){return n?{provider:e,url:n,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:r}}}_recoverSession(){var e;try{const t=Mt()&&(null===(e=this.localStorage)||void 0===e?void 0:e.getItem(jt));if(!t||"string"!=typeof t)return null;const n=JSON.parse(t),{currentSession:r,expiresAt:i}=n;i>=Math.round(Date.now()/1e3)&&(null==r?void 0:r.user)&&(this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN"))}catch(t){console.log("error",t)}}_recoverAndRefresh(){return Lt(this,void 0,void 0,(function*(){try{const e=Mt()&&(yield this.localStorage.getItem(jt));if(!e)return null;const t=JSON.parse(e),{currentSession:n,expiresAt:r}=t;if(r<Math.round(Date.now()/1e3))if(this.autoRefreshToken&&n.refresh_token){const{error:e}=yield this._callRefreshToken(n.refresh_token);e&&(console.log(e.message),yield this._removeSession())}else this._removeSession();else n&&n.user?(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}}))}_callRefreshToken(e){var t;return void 0===e&&(e=null===(t=this.currentSession)||void 0===t?void 0:t.refresh_token),Lt(this,void 0,void 0,(function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:n}=yield this.api.refreshAccessToken(e);if(n)throw n;if(!t)throw Error("Invalid session data.");return this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{data:t,error:null}}catch(t){return{data:null,error:t}}}))}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach((t=>t.callback(e,this.currentSession)))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const e=t-Math.round(Date.now()/1e3),n=e>60?60:.5;this._startAutoRefreshToken(1e3*(e-n))}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};Mt()&&this.localStorage.setItem(jt,JSON.stringify(t))}_removeSession(){return Lt(this,void 0,void 0,(function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),Mt()&&(yield this.localStorage.removeItem(jt))}))}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),e<=0||!this.autoRefreshToken||(this.refreshTokenTimer=setTimeout((()=>this._callRefreshToken()),e),"function"==typeof this.refreshTokenTimer.unref&&this.refreshTokenTimer.unref())}}{constructor(e){super(e)}}var zt=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};class Ht{constructor(e){Object.assign(this,e)}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){return void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json"),Et(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body)}).then((e=>zt(this,void 0,void 0,(function*(){var t,n,r;let i=null,s=null,a=null;if(e.ok){const i=null===(t=this.headers.Prefer)||void 0===t?void 0:t.split(",").includes("return=minimal");if("HEAD"!==this.method&&!i){const t=yield e.text();t&&(s="text/csv"===this.headers.Accept?t:JSON.parse(t))}const o=null===(n=this.headers.Prefer)||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),u=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");o&&u&&u.length>1&&(a=parseInt(u[1]))}else if(i=yield e.json(),i&&this.shouldThrowOnError)throw i;return{error:i,data:s,count:a,status:e.status,statusText:e.statusText,body:s}})))).then(e,t)}}class Gt extends Ht{select(e="*"){let t=!1;const n=e.split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this}order(e,{ascending:t=!0,nullsFirst:n=!1,foreignTable:r}={}){const i=void 0===r?"order":`${r}.order`,s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${e}.${t?"asc":"desc"}.${n?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const r=void 0===n?"offset":`${n}.offset`,i=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){this.headers.Accept="application/vnd.pgrst.object+json";const e=new Gt(this);return e.then=(e,t)=>this.then((t=>{var n,r;return(null===(r=null===(n=t.error)||void 0===n?void 0:n.details)||void 0===r?void 0:r.includes("Results contain 0 rows"))?e({error:null,data:null,count:t.count,status:200,statusText:"OK",body:null}):e(t)}),t),e}csv(){return this.headers.Accept="text/csv",this}}class Jt extends Gt{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,n){return this.url.searchParams.append(`${e}`,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=void 0===t?"or":`${t}.or`;return this.url.searchParams.append(n,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const n=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(`${e}`,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r=null}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const s=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`${i}fts${s}.${t}`),this}fts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`fts${r}.${t}`),this}plfts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`plfts${r}.${t}`),this}phfts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`phfts${r}.${t}`),this}wfts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`wfts${r}.${t}`),this}filter(e,t,n){return this.url.searchParams.append(`${e}`,`${t}.${n}`),this}match(e){return Object.keys(e).forEach((t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)})),this}}class Vt extends Ht{constructor(e,{headers:t={},schema:n}={}){super({}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}select(e="*",{head:t=!1,count:n=null}={}){this.method="GET";let r=!1;const i=e.split("").map((e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),t&&(this.method="HEAD"),new Jt(this)}insert(e,{upsert:t=!1,onConflict:n,returning:r="representation",count:i=null}={}){this.method="POST";const s=[`return=${r}`];if(t&&s.push("resolution=merge-duplicates"),t&&void 0!==n&&this.url.searchParams.set("on_conflict",n),this.body=e,i&&s.push(`count=${i}`),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new Jt(this)}upsert(e,{onConflict:t,returning:n="representation",count:r=null,ignoreDuplicates:i=!1}={}){this.method="POST";const s=[`resolution=${i?"ignore":"merge"}-duplicates`,`return=${n}`];return void 0!==t&&this.url.searchParams.set("on_conflict",t),this.body=e,r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Jt(this)}update(e,{returning:t="representation",count:n=null}={}){this.method="PATCH";const r=[`return=${t}`];return this.body=e,n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new Jt(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const n=[`return=${e}`];return t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Jt(this)}}class qt extends Ht{constructor(e,{headers:t={},schema:n}={}){super({}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}rpc(e,{count:t=null}={}){return this.method="POST",this.body=e,t&&(void 0!==this.headers.Prefer?this.headers.Prefer+=`,count=${t}`:this.headers.Prefer=`count=${t}`),new Jt(this)}}const Wt={"X-Client-Info":"postgrest-js/0.33.3"};class Kt{constructor(e,{headers:t={},schema:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Wt),t),this.schema=n}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new Vt(t,{headers:this.headers,schema:this.schema})}rpc(e,t,{count:n=null}={}){const r=`${this.url}/rpc/${e}`;return new qt(r,{headers:this.headers,schema:this.schema}).rpc(t,{count:n})}}var Xt,Yt;(Yt=Xt||(Xt={})).abstime="abstime",Yt.bool="bool",Yt.date="date",Yt.daterange="daterange",Yt.float4="float4",Yt.float8="float8",Yt.int2="int2",Yt.int4="int4",Yt.int4range="int4range",Yt.int8="int8",Yt.int8range="int8range",Yt.json="json",Yt.jsonb="jsonb",Yt.money="money",Yt.numeric="numeric",Yt.oid="oid",Yt.reltime="reltime",Yt.time="time",Yt.timestamp="timestamp",Yt.timestamptz="timestamptz",Yt.timetz="timetz",Yt.tsrange="tsrange",Yt.tstzrange="tstzrange";const Zt=(e,t,n={})=>{let r={},i=void 0!==n.skipTypes?n.skipTypes:[];return Object.entries(t).map((([n,s])=>{r[n]=Qt(n,e,t,i)})),r},Qt=(e,t,n,r)=>{let i=t.find((t=>t.name==e));return!i||r.includes(i.type)?tn(n[e]):en(i.type,n[e])},en=(e,t)=>{try{if(null===t)return null;if("_"===e.charAt(0)){let n=e.slice(1,e.length);return ln(t,n)}switch(e){case Xt.abstime:return tn(t);case Xt.bool:return nn(t);case Xt.date:return tn(t);case Xt.daterange:return rn(t);case Xt.float4:case Xt.float8:return sn(t);case Xt.int2:case Xt.int4:return an(t);case Xt.int4range:return on(t);case Xt.int8:return an(t);case Xt.int8range:return on(t);case Xt.json:case Xt.jsonb:return un(t);case Xt.money:case Xt.numeric:return sn(t);case Xt.oid:return an(t);case Xt.reltime:case Xt.time:return tn(t);case Xt.timestamp:return cn(t);case Xt.timestamptz:case Xt.timetz:return tn(t);case Xt.tsrange:case Xt.tstzrange:return rn(t);default:return tn(t)}}catch(n){return console.log(`Could not convert cell of type ${e} and value ${t}`),console.log(`This is the error: ${n}`),t}},tn=e=>e,nn=e=>{switch(e){case"t":return!0;case"f":return!1;default:return null}},rn=e=>{let t=JSON.parse(e);return[new Date(t[0]),new Date(t[1])]},sn=e=>parseFloat(e),an=e=>parseInt(e),on=e=>{let t=JSON.parse(e);return[parseInt(t[0]),parseInt(t[1])]},un=e=>JSON.parse(e),ln=(e,t)=>{let n=e.slice(1,e.length-1);return(n.length>0?n.split(","):[]).map((e=>en(t,e)))},cn=e=>e.replace(" ","T"),hn={"X-Client-Info":"realtime-js/1.1.3"};var pn,dn,mn,yn,fn,gn,vn;(dn=pn||(pn={}))[dn.connecting=0]="connecting",dn[dn.open=1]="open",dn[dn.closing=2]="closing",dn[dn.closed=3]="closed",(yn=mn||(mn={})).closed="closed",yn.errored="errored",yn.joined="joined",yn.joining="joining",yn.leaving="leaving",(gn=fn||(fn={})).close="phx_close",gn.error="phx_error",gn.join="phx_join",gn.reply="phx_reply",gn.leave="phx_leave",(vn||(vn={})).websocket="websocket";class bn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class wn{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout))}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class _n{constructor(e,t={},n){this.topic=e,this.params=t,this.socket=n,this.bindings=[],this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new wn(this,fn.join,this.params,this.timeout),this.rejoinTimer=new bn((()=>this.rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this.onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=mn.closed,this.socket.remove(this)})),this.onError((e=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this.isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())})),this.on(fn.reply,((e,t)=>{this.trigger(this.replyEventName(t),e)}))}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(fn.close,e)}onError(e){this.on(fn.error,(t=>e(t)))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter((t=>t.event!==e))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new wn(this,e,t,n);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}unsubscribe(e=this.timeout){this.state=mn.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(fn.close,"leave",this.joinRef())};this.joinPush.destroy();let n=new wn(this,fn.leave,{},e);return n.receive("ok",(()=>t())).receive("timeout",(()=>t())),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}sendJoin(e){this.state=mn.joining,this.joinPush.resend(e)}rejoin(e=this.timeout){this.isLeaving()||this.sendJoin(e)}trigger(e,t,n){let{close:r,error:i,leave:s,join:a}=fn;if(n&&[r,i,s,a].indexOf(e)>=0&&n!==this.joinRef())return;let o=this.onMessage(e,t,n);if(t&&!o)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter((n=>"*"===n.event?e===(null==t?void 0:t.type):n.event===e)).map((e=>e.callback(o,n)))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===mn.closed}isErrored(){return this.state===mn.errored}isJoined(){return this.state===mn.joined}isJoining(){return this.state===mn.joining}isLeaving(){return this.state===mn.leaving}}var Tn=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},En=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return Tn()}try{return __global__||Tn()}finally{delete Object.prototype.__global__}}();var xn,Sn="1.0.34";if("object"==typeof globalThis)xn=globalThis;else try{xn=En}catch(Er){}finally{if(xn||"undefined"==typeof window||(xn=window),!xn)throw new Error("Could not determine global this")}var On=xn.WebSocket||xn.MozWebSocket,kn=Sn;function An(e,t){return t?new On(e,t):new On(e)}On&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(An,e,{get:function(){return On[e]}})}));var jn={w3cwebsocket:On?An:null,version:kn};class Pn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let s=this.HEADER_LENGTH+2;const a=n.decode(e.slice(s,s+r));s+=r;const o=n.decode(e.slice(s,s+i));s+=i;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}}var Rn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};const $n=()=>{};class Cn{constructor(e,t){this.channels=[],this.endPoint="",this.headers=hn,this.params={},this.timeout=1e4,this.transport=jn.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=$n,this.conn=null,this.sendBuffer=[],this.serializer=new Pn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${vn.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),(null==t?void 0:t.longpollerTimeout)&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bn((()=>Rn(this,void 0,void 0,(function*(){yield this.disconnect(),this.connect()}))),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise(((n,r)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),n({error:null,data:!0})}catch(Er){n({error:Er,data:!1})}}))}log(e,t,n){this.logger(e,t,n)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case pn.connecting:return"connecting";case pn.open:return"open";case pn.closing:return"closing";default:return"closed"}}isConnected(){return"open"===this.connectionState()}remove(e){this.channels=this.channels.filter((t=>t.joinRef()!==e.joinRef()))}channel(e,t={}){let n=new _n(e,t,this);return this.channels.push(n),n}push(e){let{topic:t,event:n,payload:r,ref:i}=e,s=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?s():this.sendBuffer.push(s)}onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:i}=e;i&&i===this.pendingHeartbeatRef?this.pendingHeartbeatRef=null:n===(null==r?void 0:r.type)&&this._resetHeartbeat(),this.log("receive",`${r.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,r),this.channels.filter((e=>e.isMember(t))).forEach((e=>e.trigger(n,r,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this._resetHeartbeat(),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e.trigger(fn.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_resetHeartbeat(){this.pendingHeartbeatRef=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs)}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}}class In{constructor(e,t,n){const r="*"===n?`realtime:${t}`:`realtime:${t}:${n}`;this.subscription=e.channel(r)}getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Zt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Zt(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,(e=>{let n={schema:e.schema,table:e.table,commit_timestamp:e.commit_timestamp,eventType:e.type,new:{},old:{}};n=Object.assign(Object.assign({},n),this.getPayloadRecords(e)),t(n)})),this}subscribe(e=(()=>{})){return this.subscription.onError((t=>e("SUBSCRIPTION_ERROR",t))),this.subscription.onClose((()=>e("CLOSED"))),this.subscription.subscribe().receive("ok",(()=>e("SUBSCRIBED"))).receive("error",(t=>e("SUBSCRIPTION_ERROR",t))).receive("timeout",(()=>e("RETRYING_AFTER_TIMEOUT"))),this.subscription}}class Mn extends Vt{constructor(e,{headers:t={},schema:n,realtime:r,table:i}){super(e,{headers:t,schema:n}),this._subscription=new In(r,n,i),this._realtime=r}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription.on(e,t)}}var Nn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};const Un=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function Fn(e,t,n,r,i){return Nn(this,void 0,void 0,(function*(){return new Promise(((s,a)=>{Et(t,((e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(e,n,r,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?s(e):e.json()})).then((e=>s(e))).catch((e=>((e,t)=>{if("function"!=typeof e.json)return t(e);e.json().then((n=>t({message:Un(n),status:(null==e?void 0:e.status)||500})))})(e,a)))}))}))}function Ln(e,t,n){return Nn(this,void 0,void 0,(function*(){return Fn("GET",e,t,n)}))}function Dn(e,t,n,r){return Nn(this,void 0,void 0,(function*(){return Fn("POST",e,n,r,t)}))}function Bn(e,t,n,r){return Nn(this,void 0,void 0,(function*(){return Fn("DELETE",e,n,r,t)}))}const zn={"X-Client-Info":"storage-js/0.0.0"};var Hn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};var Gn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};const Jn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qn{constructor(e,t={},n){this.url=e,this.headers=t,this.bucketId=n}uploadOrUpdate(e,t,n,r){return Gn(this,void 0,void 0,(function*(){try{let i;const s=Object.assign(Object.assign({},Vn),r),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),i.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",s.cacheControl)):(i=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType);const o=this._getFinalPath(t),u=yield Et(`${this.url}/object/${o}`,{method:e,body:i,headers:a});if(u.ok)return{data:{Key:o},error:null};return{data:null,error:yield u.json()}}catch(Er){return{data:null,error:Er}}}))}upload(e,t,n){return Gn(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}update(e,t,n){return Gn(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return Gn(this,void 0,void 0,(function*(){try{return{data:yield Dn(`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(Er){return{data:null,error:Er}}}))}createSignedUrl(e,t){return Gn(this,void 0,void 0,(function*(){try{const n=this._getFinalPath(e);let r=yield Dn(`${this.url}/object/sign/${n}`,{expiresIn:t},{headers:this.headers});const i=`${this.url}${r.signedURL}`;return r={signedURL:i},{data:r,error:null,signedURL:i}}catch(Er){return{data:null,error:Er,signedURL:null}}}))}download(e){return Gn(this,void 0,void 0,(function*(){try{const t=this._getFinalPath(e),n=yield Ln(`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(Er){return{data:null,error:Er}}}))}getPublicUrl(e){try{const t=this._getFinalPath(e),n=`${this.url}/object/public/${t}`;return{data:{publicURL:n},error:null,publicURL:n}}catch(Er){return{data:null,error:Er,publicURL:null}}}remove(e){return Gn(this,void 0,void 0,(function*(){try{return{data:yield Bn(`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(Er){return{data:null,error:Er}}}))}list(e,t,n){return Gn(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},Jn),t),{prefix:e||""});return{data:yield Dn(`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(Er){return{data:null,error:Er}}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}}class Wn extends class{constructor(e,t={}){this.url=e,this.headers=Object.assign(Object.assign({},zn),t)}listBuckets(){return Hn(this,void 0,void 0,(function*(){try{return{data:yield Ln(`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(Er){return{data:null,error:Er}}}))}getBucket(e){return Hn(this,void 0,void 0,(function*(){try{return{data:yield Ln(`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(Er){return{data:null,error:Er}}}))}createBucket(e,t={public:!1}){return Hn(this,void 0,void 0,(function*(){try{return{data:(yield Dn(`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(Er){return{data:null,error:Er}}}))}updateBucket(e,t){return Hn(this,void 0,void 0,(function*(){try{return{data:yield function(e,t,n,r){return Nn(this,void 0,void 0,(function*(){return Fn("PUT",e,n,r,t)}))}(`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(Er){return{data:null,error:Er}}}))}emptyBucket(e){return Hn(this,void 0,void 0,(function*(){try{return{data:yield Dn(`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(Er){return{data:null,error:Er}}}))}deleteBucket(e){return Hn(this,void 0,void 0,(function*(){try{return{data:yield Bn(`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(Er){return{data:null,error:Er}}}))}}{constructor(e,t={}){super(e,t)}from(e){return new qn(this.url,this.headers,e)}}var Kn=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{u(r.next(e))}catch(t){s(t)}}function o(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}u((r=r.apply(e,t||[])).next())}))};const Xn={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_t};class Yn{constructor(e,t,n){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const r=Object.assign(Object.assign({},Xn),n);this.restUrl=`${e}/rest/v1`,this.realtimeUrl=`${e}/realtime/v1`.replace("http","ws"),this.authUrl=`${e}/auth/v1`,this.storageUrl=`${e}/storage/v1`,this.schema=r.schema,this.auth=this._initSupabaseAuthClient(r),this.realtime=this._initRealtimeClient(r.realtime)}get storage(){return new Wn(this.storageUrl,this._getAuthHeaders())}from(e){const t=`${this.restUrl}/${e}`;return new Mn(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e})}rpc(e,t,{count:n=null}={}){return this._initPostgRESTClient().rpc(e,t,{count:n})}removeSubscription(e){return new Promise((t=>Kn(this,void 0,void 0,(function*(){try{yield this._closeSubscription(e);const n=this.getSubscriptions().length;if(!n){const{error:e}=yield this.realtime.disconnect();if(e)return t({error:e})}return t({error:null,data:{openSubscriptions:n}})}catch(Er){return t({error:Er})}}))))}_closeSubscription(e){return Kn(this,void 0,void 0,(function*(){e.isClosed()||(yield this._closeChannel(e))}))}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:r,headers:i}){const s={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Bt({url:this.authUrl,headers:Object.assign(Object.assign({},i),s),autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:r})}_initRealtimeClient(e){return new Cn(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},null==e?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new Kt(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema})}_getAuthHeaders(){var e,t;const n=_t,r=null!==(t=null===(e=this.auth.session())||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey;return n.apikey=this.supabaseKey,n.Authorization=`Bearer ${r}`,n}_closeChannel(e){return new Promise(((t,n)=>{e.unsubscribe().receive("ok",(()=>(this.realtime.remove(e),t(!0)))).receive("error",(e=>n(e)))}))}}const Zn=(e,t,n)=>new Yn(e,t,n);var Qn=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"summoner",type:"uint256"}],name:"leveled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"class",type:"uint256"},{indexed:!1,internalType:"uint256",name:"summoner",type:"uint256"}],name:"summoned",type:"event"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"adventure",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"adventurers_log",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"class",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"classes",outputs:[{internalType:"string",name:"description",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"level",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"level_up",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"next_summoner",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"},{internalType:"uint256",name:"_xp",type:"uint256"}],name:"spend_xp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_class",type:"uint256"}],name:"summon",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"summoner",outputs:[{internalType:"uint256",name:"_xp",type:"uint256"},{internalType:"uint256",name:"_log",type:"uint256"},{internalType:"uint256",name:"_class",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"xp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"curent_level",type:"uint256"}],name:"xp_required",outputs:[{internalType:"uint256",name:"xp_to_next_level",type:"uint256"}],stateMutability:"pure",type:"function"}],er=[{inputs:[{internalType:"address",name:"rarityAddr",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"from",type:"uint256"},{indexed:!0,internalType:"uint256",name:"to",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"from",type:"uint256"},{indexed:!0,internalType:"uint256",name:"to",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"claimed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"level",type:"uint256"}],name:"wealth_by_level",outputs:[{internalType:"uint256",name:"wealth",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"summoner",type:"uint256"}],name:"claimable",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"summoner",type:"uint256"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"from",type:"uint256"},{internalType:"uint256",name:"spender",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"from",type:"uint256"},{internalType:"uint256",name:"to",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"executor",type:"uint256"},{internalType:"uint256",name:"from",type:"uint256"},{internalType:"uint256",name:"to",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],tr=[{inputs:[{internalType:"address",name:"rarityAddr",type:"address"},{internalType:"address",name:"attrAddr",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"from",type:"uint256"},{indexed:!0,internalType:"uint256",name:"to",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"from",type:"uint256"},{indexed:!0,internalType:"uint256",name:"to",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"adventurers_log",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"dungeon_armor_class",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"dungeon_damage",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"dungeon_health",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"dungeon_to_hit",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_class",type:"uint256"}],name:"health_by_class",outputs:[{internalType:"uint256",name:"health",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_class",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"},{internalType:"uint32",name:"_const",type:"uint32"}],name:"health_by_class_and_level",outputs:[{internalType:"uint256",name:"health",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_class",type:"uint256"}],name:"base_attack_bonus_by_class",outputs:[{internalType:"uint256",name:"attack",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_class",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],name:"base_attack_bonus_by_class_and_level",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_attribute",type:"uint256"}],name:"modifier_for_attribute",outputs:[{internalType:"int256",name:"_modifier",type:"int256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_class",type:"uint256"},{internalType:"uint256",name:"_str",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],name:"attack_bonus",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"int256",name:"_attack_bonus",type:"int256"}],name:"to_hit_ac",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_str",type:"uint256"}],name:"damage",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_dex",type:"uint256"}],name:"armor_class",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"scout",outputs:[{internalType:"uint256",name:"reward",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"adventure",outputs:[{internalType:"uint256",name:"reward",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"from",type:"uint256"},{internalType:"uint256",name:"spender",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"from",type:"uint256"},{internalType:"uint256",name:"to",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"executor",type:"uint256"},{internalType:"uint256",name:"from",type:"uint256"},{internalType:"uint256",name:"to",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],nr=[{inputs:[{internalType:"address",name:"rarityAddr",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"uint256",name:"summoner",type:"uint256"},{indexed:!1,internalType:"uint32",name:"strength",type:"uint32"},{indexed:!1,internalType:"uint32",name:"dexterity",type:"uint32"},{indexed:!1,internalType:"uint32",name:"constitution",type:"uint32"},{indexed:!1,internalType:"uint32",name:"intelligence",type:"uint32"},{indexed:!1,internalType:"uint32",name:"wisdom",type:"uint32"},{indexed:!1,internalType:"uint32",name:"charisma",type:"uint32"}],name:"Created",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"leveler",type:"address"},{indexed:!1,internalType:"uint256",name:"summoner",type:"uint256"},{indexed:!1,internalType:"uint32",name:"strength",type:"uint32"},{indexed:!1,internalType:"uint32",name:"dexterity",type:"uint32"},{indexed:!1,internalType:"uint32",name:"constitution",type:"uint32"},{indexed:!1,internalType:"uint32",name:"intelligence",type:"uint32"},{indexed:!1,internalType:"uint32",name:"wisdom",type:"uint32"},{indexed:!1,internalType:"uint32",name:"charisma",type:"uint32"}],name:"Leveled",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ability_scores",outputs:[{internalType:"uint32",name:"strength",type:"uint32"},{internalType:"uint32",name:"dexterity",type:"uint32"},{internalType:"uint32",name:"constitution",type:"uint32"},{internalType:"uint32",name:"intelligence",type:"uint32"},{internalType:"uint32",name:"wisdom",type:"uint32"},{internalType:"uint32",name:"charisma",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"character_created",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"level_points_spent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"},{internalType:"uint32",name:"_str",type:"uint32"},{internalType:"uint32",name:"_dex",type:"uint32"},{internalType:"uint32",name:"_const",type:"uint32"},{internalType:"uint32",name:"_int",type:"uint32"},{internalType:"uint32",name:"_wis",type:"uint32"},{internalType:"uint32",name:"_cha",type:"uint32"}],name:"point_buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_str",type:"uint256"},{internalType:"uint256",name:"_dex",type:"uint256"},{internalType:"uint256",name:"_const",type:"uint256"},{internalType:"uint256",name:"_int",type:"uint256"},{internalType:"uint256",name:"_wis",type:"uint256"},{internalType:"uint256",name:"_cha",type:"uint256"}],name:"calculate_point_buy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"score",type:"uint256"}],name:"calc",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"increase_strength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"increase_dexterity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"increase_constitution",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"increase_intelligence",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"increase_wisdom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"increase_charisma",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"current_level",type:"uint256"}],name:"abilities_by_level",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"_summoner",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const rr=f();o("data-v-53764132");const ir={class:"container"};u();const sr={expose:[],props:{address:String},setup(e){const t=e,n=l(),r=l(),i=l(),s=l(),a=l(),o=l(),u=l(!0),f=c({page:1,pageCount:10,pageSize:10,prefix:({itemCount:e})=>`Total is ${e}.`}),g=Zn("https://sfwgxglduielikiqqzdv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMTMzMDIyMywiZXhwIjoxOTQ2OTA2MjIzfQ.KHW_m9zE0t7VsZAZKNf7BMMYc1tLBeTVTYP3yjC-bF0"),v=[{title:"ID",key:"id"},{title:"职业",key:"type"},{title:"等级",key:"level"},{title:"经验",key:"xp"},{title:"金币",key:"gold"},{title:"地牢奖励(Craft (I))",key:"cellarMaterial"},{title:"上次冒险",key:"log"},{title:"上次地牢",key:"cellarLog"},{title:"力量",key:"strength"},{title:"敏捷",key:"dexterity"},{title:"体质",key:"constitution"},{title:"智力",key:"intelligence"},{title:"智慧",key:"wisdom"},{title:"魅力",key:"charisma"}],b=e=>1===e?"野蛮人":2===e?"诗人":3===e?"牧师":4===e?"德鲁伊":5===e?"战士":6===e?"僧侣":7===e?"圣骑士":8===e?"游侠":9===e?"盗贼":10===e?"巫师":11===e?"法师":void 0,w=async e=>{if(u.value)return;u.value=!0,f.page=e;const t=n.value.slice((e-1)*f.pageSize,e*f.pageSize).map((async e=>{const[t,n,r,u]=await i.value.summoner(e),l=await s.value.balanceOf(e),c=await a.value.balanceOf(e),h=await a.value.adventurers_log(e),[p,d,m,y,f,g]=await o.value.ability_scores(e);return{id:e,type:b(r.toNumber()),level:u.toString(),xp:t.div(ne).toString(),gold:l.div(ne).toString(),cellarMaterial:c.toString(),log:0===n.toNumber()?"N/A":new Date(1e3*n.toNumber()-864e5).toLocaleString(),cellarLog:0===h.toNumber()?"N/A":new Date(1e3*h.toNumber()-864e5).toLocaleString(),strength:p,dexterity:d,constitution:m,intelligence:y,wisdom:f,charisma:g}}));r.value=await Promise.all(t),u.value=!1};return h((async()=>{if(t.address){const e=window.ethereum?new ee(window.ethereum):new te("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),r=await e.getSigner();u.value=!1,i.value=new yt(bt,Qn,r),s.value=new yt(ft,er,r),a.value=new yt(vt,tr,r),o.value=new yt(gt,nr,r),await(async()=>{const{data:e}=await g.from("rarity_heroes").select().range(0,2e3).eq("address",t.address.toLowerCase());n.value=e.map((e=>e.id)),f.itemCount=e.length,f.pageCount=Math.ceil(e.length/f.pageSize),console.log(f)})(),await w(1)}})),rr(((e,t)=>{const n=p("n-data-table");return d(),m("div",ir,[y(n,{remote:"",ref:table,columns:v,data:r.value,pagination:f,"row-key":e=>e.id,loading:u.value,"onUpdate:page":w},null,8,["data","row-key","loading"])])}))},__scopeId:"data-v-53764132"};const ar=f();o("data-v-ded67934");const or={class:"container"},ur=v("查询我的"),lr={class:"container"},cr=v("查询");u();const hr={expose:[],props:{address:String},setup(e){const o=e,u=l(),f=l(),v=l(0),b=l(0),w=l(!1),_=c({pageSize:10}),T=Zn("https://sfwgxglduielikiqqzdv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMTMzMDIyMywiZXhwIjoxOTQ2OTA2MjIzfQ.KHW_m9zE0t7VsZAZKNf7BMMYc1tLBeTVTYP3yjC-bF0"),E=[{title:"Hash",key:"hash"},{title:"操作",key:"type"},{title:"费用(FTM)",key:"gasCost"},{title:"时间",key:"time"},{title:"批量英雄",key:"heroes_count"}],x=async e=>{if(w.value)return;w.value=!0;const{data:o}=await T.from("rarity_logs").select("hash, type, gasCost, timestamp, heroes_count").eq("address",e.toLowerCase()).order("timestamp",{ascending:!1});u.value=o.map((e=>{return o=((e,t)=>{for(var n in t||(t={}))i.call(t,n)&&a(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&a(e,n,t[n]);return e})({},e),u={time:new Date(e.timestamp).toLocaleString(),type:e.type||"未记录",heroes_count:e.heroes_count||"未记录"},t(o,n(u));var o,u})),v.value=o.reduce(((e,t)=>e+1*t.gasCost),0),b.value=o.length,w.value=!1};return h((async()=>{o.address&&await x(o.address)})),ar(((t,n)=>{const r=p("n-button"),i=p("n-input"),s=p("n-input-group"),a=p("n-data-table");return d(),m("div",or,[y(r,{onClick:n[1]||(n[1]=()=>x(e.address))},{default:ar((()=>[ur])),_:1}),y("div",lr,[y(s,null,{default:ar((()=>[y(i,{style:{width:"100%"},placeholder:"0x...",value:f.value,"onUpdate:value":n[2]||(n[2]=e=>f.value=e),onChange:n[3]||(n[3]=()=>{})},null,8,["value"]),y(r,{type:"primary",onClick:n[4]||(n[4]=()=>x(f.value)),ghost:""},{default:ar((()=>[cr])),_:1})])),_:1})]),y("h4",null,"FTM消耗："+g(v.value),1),y(a,{ref:table,columns:E,data:u.value,pagination:_,"row-key":e=>e.id,loading:w.value},null,8,["data","row-key","loading"])])}))},__scopeId:"data-v-ded67934"};var pr={};const dr=f();o("data-v-ae1295fc");const mr={class:"container"},yr={key:0,class:"module-approve"},fr=y("p",null,"请授权 Rarity 合约后联系大聪明客服，开启躺赢模式",-1),gr=v(" Approve "),vr={key:1},br=y("p",null,"已经完成授权",-1),wr=v(" Approved "),_r={key:1,class:"module-log"};u();const Tr={expose:[],props:{address:String,provider:Object},setup(e){const t=e,n=l();b((()=>t.address),(async e=>{const r=await t.provider.getSigner();n.value=new yt(bt,Qn,r),a()}));const r=l(!1),i=l({account:!1,approve:!1,action:!1}),s=w(),a=async()=>{try{i.value.approve=!0;const e=await n.value.isApprovedForAll(t.address,wt);r.value=e,i.value.approve=!1}catch(e){console.log(e),s.error(e.toString())}},o=async()=>{try{i.value.action=!0;const e=await n.value.setApprovalForAll(wt,!0);await e.wait();i.value.action=!1,s.success("授权成功"),await a()}catch(e){s.error(e.toString)}};return dr(((t,n)=>{const s=p("n-spin"),a=p("n-button"),u=p("n-tab-pane"),l=p("n-tabs"),c=p("n-card");return d(),m("div",mr,[e.address?(d(),m("div",yr,[i.value.approve?(d(),m(s,{key:0,stroke:"#000"})):(d(),m(_,{key:1},[r.value?T("",!0):(d(),m(_,{key:0},[fr,y(a,{class:"btn-approve",loading:i.value.action,size:"large",color:"#000",onClick:o},{default:dr((()=>[gr])),_:1},8,["loading"])],64)),r.value?(d(),m("div",vr,[br,y(a,{class:"btn-approve",ghost:"",size:"large",color:"#000",disabled:""},{default:dr((()=>[wr])),_:1})])):T("",!0)],64))])):T("",!0),e.address&&r.value?(d(),m("div",_r,[y(c,{style:{"margin-bottom":"16px",width:"100%"}},{default:dr((()=>[y(l,{type:"line"},{default:dr((()=>[y(u,{name:"heroes",tab:"英雄数据"},{default:dr((()=>[y(sr,{address:e.address},null,8,["address"])])),_:1}),y(u,{name:"logs",tab:"挂机日志"},{default:dr((()=>[y(hr,{address:e.address},null,8,["address"])])),_:1})])),_:1})])),_:1})])):T("",!0)])}))}};"function"==typeof pr&&pr(Tr),Tr.__scopeId="data-v-ae1295fc";export{Tr as default};
