import{f as a,u as e,s as t,g as n,r as l,i,c as u,F as s,a as r,w as o,v as p,j as d,p as c,l as v,o as y,m as b,t as w}from"./vendor.3c215b0f.js";import{C as m,a as f,N as g,b as h,G as _}from"./cellar.0c66a8ef.js";import{a as T,W as k,J as C}from"./web3-provider.5a13caa5.js";var S=[{inputs:[{internalType:"address",name:"rAddr",type:"address"},{internalType:"address",name:"gAddr",type:"address"},{internalType:"address",name:"aAddr",type:"address"},{internalType:"address",name:"cAddr",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"},{internalType:"uint256",name:"class",type:"uint256"},{internalType:"uint32",name:"_str",type:"uint32"},{internalType:"uint32",name:"_dex",type:"uint32"},{internalType:"uint32",name:"_const",type:"uint32"},{internalType:"uint32",name:"_int",type:"uint32"},{internalType:"uint32",name:"_wis",type:"uint32"},{internalType:"uint32",name:"_cha",type:"uint32"}],name:"pointBuy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseStrength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseDexterity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseConstitution",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseIntelligence",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseWisdom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseCharisma",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"adventure",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"attackCellar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"levelUp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"approveBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"adventureAndAttackDungeon",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"levelUpAndClaim",outputs:[],stateMutability:"nonpayable",type:"function"}],O={};c("data-v-072a92f3");const M={class:"container"},A=d("div",null," 注意: rarity-game.netlify.app 不兼容, 因为对方的代码设计问题，会导致授权后无法查看 ",-1),N=d("div",null," 经过测试可以兼容 UI版 https://rarity-adventures.surge.sh/ 与 https://www.raritymanifested.com/profile ",-1),$=d("div",null," 本软件为专业软件,使用之前确保自己有一定智能合约知识 ",-1),j={key:0,class:"module-approve"},U=d("p",null,"请授权 Rarity 合约后联系大聪明客服，开启躺赢模式",-1),x=b(" Approve "),I={key:1},J=d("p",null,"已经完成授权",-1),B=b(" Approved "),D=b("Cancel Approve"),F={key:1,class:"module-log"},q=d("h4",{style:{"text-decoration":"underline"}},"👉解放双手，告别闹钟，托管请添加客服妹妹微信👈",-1),z=d("img",{width:"300",alt:"wechat qrcode",src:"./assets/qrcode.8b82ac06.jpg"},null,-1),E={class:"action-group"},R={style:{"text-decoration":"none"},href:"https://t.me/gamefichat",target:"_blank"},H=b(" 🔊大聪明社区 "),L={style:{"text-decoration":"none"},href:"https://t.me/gamefiweathy",target:"_blank"},W=b(" 🔊大聪明频道 "),G=d("h4",null,"批量操作，单次建议不超过30个。否则区块打包缓慢",-1),P={class:"action-group"},K=b("批量授权 (加点/领金需要)"),Q=b("批量冒险"),V=b("批量地牢"),X=b("批量升级"),Y=b("批量领金"),Z={class:"action-group"},aa=b("批量加点"),ea=b(' 1. Barbarian "野蛮人" '),ta=d("br",null,null,-1),na=b(' 2. Bard "诗人" '),la=d("br",null,null,-1),ia=b(' 3. Cleric "牧师" '),ua=d("br",null,null,-1),sa=b(' 4. Druid "德鲁伊" '),ra=d("br",null,null,-1),oa=b(' 5. Fighter "战士" '),pa=d("br",null,null,-1),da=b(' 6. Monk "僧侣" '),ca=d("br",null,null,-1),va=b(' 7. Paladin "圣骑士" '),ya=d("br",null,null,-1),ba=b(' 8. Ranger "游侠" '),wa=d("br",null,null,-1),ma=b(' 9. Rogue "盗贼" '),fa=d("br",null,null,-1),ga=b(' 10. Sorcerer "巫师" '),ha=d("br",null,null,-1),_a=b(' 11. Wizard "法师" '),Ta=d("br",null,null,-1),ka={class:"action-group"},Ca=b("转材料🍖"),Sa=b("转金币💰");v();const Oa={props:{address:String,nftContract:Object,provider:Object},setup(c){const v=c,O=a(""),Oa=a(""),Ma=a(""),Aa=a(""),Na=a(""),$a=a(""),ja=a(""),Ua=a(""),xa=a(""),Ia=a(""),Ja=a(!1),Ba=a(!1),Da=a(),Fa=a(),qa=a(),za=a(),Ea=a({account:!1,approve:!1,action:!1}),Ra=e();t((()=>v.address),(a=>{Ha()})),n((()=>{v.address&&Ha()}));const Ha=async()=>{const a=await v.provider.getSigner();Da.value=new m(f.NFT,g,a);try{Ea.value.approve=!0;const a=await Da.value.isApprovedForAll(v.address,f.BATCH);Ba.value=a,Ea.value.approve=!1}catch(e){Ra.error(e.toString())}},La=async()=>{const a=window.ethereum?new k(window.ethereum):new C("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),e=await a.getSigner();return Fa.value||(Fa.value=new m(f.BATCH,S,e)),Fa.value},Wa=()=>{const a=O.value.split("\n").map((a=>a.toString()));if(a.every((a=>!isNaN(parseInt(a)))))return a;throw new Error("英雄ID不正确")},Ga=()=>{const a=Oa.value;if(isNaN(parseInt(a)))throw new Error("属性不正确");return a},Pa=async()=>{Ja.value=!0,Ia.value="冒险中...";try{const a=await La(),e=Wa(),t=await a.adventure(e);await t.wait(),Ia.value=`${e.join(", ")} 冒险完成`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="冒险失败，请重试"}Ja.value=!1},Ka=async()=>{Ja.value=!0,Ia.value="攻击地牢中...";try{const a=await La(),e=Wa(),t=await a.attackCellar(e);await t.wait(),Ia.value=`${e.join(", ")} 攻击地牢完成`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="攻击地牢失败，请重试"}Ja.value=!1},Qa=async()=>{Ja.value=!0,Ia.value="授权中...";try{const a=await La(),e=Wa(),t=await a.approveBatch(e);await t.wait(),Ia.value=`${e.join(", ")} 授权完成`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="授权失败，请重试"}Ja.value=!1},Va=async()=>{Ja.value=!0,Ia.value="升级中...";try{const a=await La(),e=Wa(),t=await a.levelUp(e);await t.wait(),Ia.value=`${e.join(", ")} 升级完成`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="升级失败，请重试"}Ja.value=!1},Xa=async()=>{Ja.value=!0,Ia.value="领金中...";try{const a=await La(),e=Wa(),t=await a.claim(e);await t.wait(),Ia.value=`${e.join(", ")} 领金完成`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="领金失败，请重试，是否已授权？"}Ja.value=!1},Ya=async()=>{Ja.value=!0,Ia.value="设置属性中...";try{const a=await La(),e=Wa(),[t,n,l,i,u,s]=(()=>{const a=[Ma.value,Aa.value,Na.value,$a.value,ja.value,Ua.value];if(a.every((a=>!isNaN(parseInt(a)))))return a;throw new Error("属性不正确")})(),r=await a.pointBuy(e,xa.value,t,n,l,i,u,s);await r.wait(),Ia.value=`${e.join(", ")} 设置属性完成`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="设置属性失败，请重试，是否已授权？"}Ja.value=!1},Za=async()=>{Ja.value=!0,Ia.value="（请勿刷新）转材料中...";try{const a=await(async()=>{const a=window.ethereum?new k(window.ethereum):new C("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),e=await a.getSigner();return qa.value||(qa.value=new m(f.CELLAR,h,e)),qa.value})(),e=Wa(),t=Ga();for(let n=0;n<e.length;n++)try{const l=await a.balanceOf(e[n]);if(l.eq(0)){Ia.value=`（请勿刷新）转材料中：${e[n]} 无材料`;continue}Ia.value=`（请勿刷新）转材料中：从${e[n]}转移${l.toString()}材料`;const i=await a.transfer(e[n],t,l.toString());await i.wait()}catch{Ia.value=`（请勿刷新）转材料中：${e[n]} 转移失败`}Ia.value=`${e.join(", ")} 转材料结束`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="转材料失败"}Ja.value=!1},ae=async()=>{Ja.value=!0,Ia.value="（请勿刷新）转金币中...";try{const e=await(async()=>{const a=window.ethereum?new k(window.ethereum):new C("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),e=await a.getSigner();return za.value||(za.value=new m(f.GOLD,_,e)),za.value})(),t=Wa(),n=Ga();console.log("??");for(let l=0;l<t.length;l++)try{const a=await e.balanceOf(t[l]);if(console.log(a),a.eq(0)){Ra.info(`${t[l]} 无金币`);continue}Ia.value=`（请勿刷新）转金币中：从${t[l]}转移${a.div(T).toString()}金币`;const i=await e.transfer(t[l],n,a.toString());await i.wait()}catch(a){console.log(a),Ia.value=`（请勿刷新）转金币中：${t[l]} 转移失败`}Ia.value=`${t.join(", ")} 转金币结束`}catch(a){Ra.error(JSON.stringify(a)),Ia.value="转金币失败"}Ja.value=!1},ee=async a=>{try{Ea.value.action=!0;const e=await Da.value.setApprovalForAll(f.BATCH,a);await e.wait();Ea.value.action=!1,Ra.success("授权成功"),await Ha()}catch(e){Ra.error(JSON.stringify(e))}};return(a,e)=>{const t=l("n-spin"),n=l("n-button"),v=l("n-tooltip"),m=l("n-input"),f=l("n-text");return y(),i("div",M,[A,N,$,c.address?(y(),i("div",j,[Ea.value.approve?(y(),u(t,{key:0,stroke:"#000"})):(y(),i(s,{key:1},[Ba.value?p("",!0):(y(),i(s,{key:0},[U,r(n,{class:"btn-approve",loading:Ea.value.action,size:"large",color:"#000",onClick:e[0]||(e[0]=a=>ee(!0))},{default:o((()=>[x])),_:1},8,["loading"])],64)),Ba.value?(y(),i("div",I,[J,d("div",null,[r(n,{class:"btn-approve",ghost:"",size:"large",color:"#000",disabled:""},{default:o((()=>[B])),_:1}),r(n,{size:"large",onClick:e[1]||(e[1]=a=>ee(!1))},{default:o((()=>[D])),_:1})])])):p("",!0)],64))])):p("",!0),c.address&&Ba.value?(y(),i("div",F,[r(v,{trigger:"hover"},{trigger:o((()=>[q])),default:o((()=>[z])),_:1}),d("div",E,[d("a",R,[r(n,null,{default:o((()=>[H])),_:1})]),d("a",L,[r(n,null,{default:o((()=>[W])),_:1})])]),G,d("div",P,[r(n,{class:"action-button",type:"primary",onClick:Qa,disabled:Ja.value},{default:o((()=>[K])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:Pa,disabled:Ja.value},{default:o((()=>[Q])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:Ka,disabled:Ja.value},{default:o((()=>[V])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:Va,disabled:Ja.value},{default:o((()=>[X])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:Xa,disabled:Ja.value},{default:o((()=>[Y])),_:1},8,["disabled"])]),d("div",Z,[r(n,{class:"action-button",type:"primary",onClick:Ya,disabled:Ja.value},{default:o((()=>[aa])),_:1},8,["disabled"]),r(v,{trigger:"hover"},{trigger:o((()=>[r(m,{class:"action-button",value:xa.value,"onUpdate:value":e[2]||(e[2]=a=>xa.value=a),placeholder:"英雄类型 ID",disabled:Ja.value},null,8,["value","disabled"])])),default:o((()=>[ea,ta,na,la,ia,ua,sa,ra,oa,pa,da,ca,va,ya,ba,wa,ma,fa,ga,ha,_a,Ta])),_:1}),r(m,{class:"action-button",value:Ma.value,"onUpdate:value":e[3]||(e[3]=a=>Ma.value=a),placeholder:"strength",disabled:Ja.value},null,8,["value","disabled"]),r(m,{class:"action-button",value:Aa.value,"onUpdate:value":e[4]||(e[4]=a=>Aa.value=a),placeholder:"dexterity",disabled:Ja.value},null,8,["value","disabled"]),r(m,{class:"action-button",value:Na.value,"onUpdate:value":e[5]||(e[5]=a=>Na.value=a),placeholder:"constitution",disabled:Ja.value},null,8,["value","disabled"]),r(m,{class:"action-button",value:$a.value,"onUpdate:value":e[6]||(e[6]=a=>$a.value=a),placeholder:"intelligence",disabled:Ja.value},null,8,["value","disabled"]),r(m,{class:"action-button",value:ja.value,"onUpdate:value":e[7]||(e[7]=a=>ja.value=a),placeholder:"wisdom",disabled:Ja.value},null,8,["value","disabled"]),r(m,{class:"action-button",value:Ua.value,"onUpdate:value":e[8]||(e[8]=a=>Ua.value=a),placeholder:"charisma",disabled:Ja.value},null,8,["value","disabled"])]),d("div",ka,[r(n,{class:"action-button",type:"primary",onClick:Za,disabled:Ja.value},{default:o((()=>[Ca])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:ae,disabled:Ja.value},{default:o((()=>[Sa])),_:1},8,["disabled"]),r(m,{class:"action-button",value:Oa.value,"onUpdate:value":e[9]||(e[9]=a=>Oa.value=a),placeholder:"收货英雄ID",disabled:Ja.value},null,8,["value","disabled"])]),r(f,{type:"info"},{default:o((()=>[b(w(Ia.value),1)])),_:1}),r(m,{value:O.value,"onUpdate:value":e[10]||(e[10]=a=>O.value=a),type:"textarea",placeholder:"英雄ID列表，一行一个",disabled:Ja.value},null,8,["value","disabled"])])):p("",!0)])}}};"function"==typeof O&&O(Oa),Oa.__scopeId="data-v-072a92f3";export{Oa as default};
