import{f as a,u as e,s as t,g as n,r as l,i,c as u,F as s,a as r,w as o,v as p,j as d,p as c,l as y,o as v,m as b,t as m}from"./vendor.967f8ea1.js";import{C as f,a as w,N as g}from"./nft.61b44095.js";import{W as h,J as _}from"./web3-provider.5a13caa5.js";var T=[{inputs:[{internalType:"address",name:"rAddr",type:"address"},{internalType:"address",name:"gAddr",type:"address"},{internalType:"address",name:"aAddr",type:"address"},{internalType:"address",name:"cAddr",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"},{internalType:"uint256",name:"class",type:"uint256"},{internalType:"uint32",name:"_str",type:"uint32"},{internalType:"uint32",name:"_dex",type:"uint32"},{internalType:"uint32",name:"_const",type:"uint32"},{internalType:"uint32",name:"_int",type:"uint32"},{internalType:"uint32",name:"_wis",type:"uint32"},{internalType:"uint32",name:"_cha",type:"uint32"}],name:"pointBuy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseStrength",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseDexterity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseConstitution",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseIntelligence",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseWisdom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"increaseCharisma",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"adventure",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"attackCellar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"levelUp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"approveBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"adventureAndAttackDungeon",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_ids",type:"uint256[]"}],name:"levelUpAndClaim",outputs:[],stateMutability:"nonpayable",type:"function"}],k={};c("data-v-c9ca7cf2");const C={class:"container"},M=d("div",null," 注意: rarity-game.netlify.app 不兼容, 因为对方的代码设计问题，会导致授权后无法查看 ",-1),A=d("div",null," 经过测试可以兼容 UI版 https://rarity-adventures.surge.sh/ 与 https://www.raritymanifested.com/profile ",-1),O=d("div",null," 本软件为专业软件,使用之前确保自己有一定智能合约知识 ",-1),S={key:0,class:"module-approve"},j=d("p",null,"请授权 Rarity 合约后联系大聪明客服，开启躺赢模式",-1),N=b(" Approve "),U={key:1},x=d("p",null,"已经完成授权",-1),B=b(" Approved "),I=b("Cancel Approve"),D={key:1,class:"module-log"},J=d("h4",{style:{"text-decoration":"underline"}},"👉解放双手，告别闹钟，托管请添加客服妹妹微信👈",-1),$=d("img",{width:"300",alt:"wechat qrcode",src:"./assets/qrcode.8b82ac06.jpg"},null,-1),F={class:"action-group"},z={style:{"text-decoration":"none"},href:"https://t.me/gamefichat",target:"_blank"},H=b(" 🔊大聪明社区 "),R={style:{"text-decoration":"none"},href:"https://t.me/gamefiweathy",target:"_blank"},W=b(" 🔊大聪明频道 "),q=d("h4",null,"批量操作，单次建议不超过30个。否则区块打包缓慢",-1),E={class:"action-group"},P=b("批量授权 (加点/领金需要)"),G=b("批量冒险"),K=b("批量地牢"),L=b("批量升级"),Q=b("批量领金"),V={class:"action-group"},X=b("批量加点"),Y=b(' 1. Barbarian "野蛮人" '),Z=d("br",null,null,-1),aa=b(' 2. Bard "诗人" '),ea=d("br",null,null,-1),ta=b(' 3. Cleric "牧师" '),na=d("br",null,null,-1),la=b(' 4. Druid "德鲁伊" '),ia=d("br",null,null,-1),ua=b(' 5. Fighter "战士" '),sa=d("br",null,null,-1),ra=b(' 6. Monk "僧侣" '),oa=d("br",null,null,-1),pa=b(' 7. Paladin "圣骑士" '),da=d("br",null,null,-1),ca=b(' 8. Ranger "游侠" '),ya=d("br",null,null,-1),va=b(' 9. Rogue "盗贼" '),ba=d("br",null,null,-1),ma=b(' 10. Sorcerer "巫师" '),fa=d("br",null,null,-1),wa=b(' 11. Wizard "法师" '),ga=d("br",null,null,-1);y();const ha={props:{address:String,nftContract:Object,provider:Object},setup(c){const y=c,k=a(""),ha=a(""),_a=a(""),Ta=a(""),ka=a(""),Ca=a(""),Ma=a(""),Aa=a(""),Oa=a(""),Sa=a(!1),ja=a(!1),Na=a(),Ua=a(),xa=a({account:!1,approve:!1,action:!1}),Ba=e();t((()=>y.address),(a=>{Ia()})),n((()=>{y.address&&Ia()}));const Ia=async()=>{const a=await y.provider.getSigner();Na.value=new f(w.NFT,g,a);try{xa.value.approve=!0;const a=await Na.value.isApprovedForAll(y.address,w.BATCH);ja.value=a,xa.value.approve=!1}catch(e){Ba.error(e.toString())}},Da=async()=>{const a=window.ethereum?new h(window.ethereum):new _("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),e=await a.getSigner();return Ua.value||(Ua.value=new f(w.BATCH,T,e)),Ua.value},Ja=()=>{const a=k.value.split("\n").map((a=>a.toString()));if(a.every((a=>!isNaN(parseInt(a)))))return a;throw new Error("英雄ID不正确")},$a=async()=>{Sa.value=!0,Oa.value="冒险中...";try{const a=await Da(),e=Ja(),t=await a.adventure(e);await t.wait(),Oa.value=`${e.join(", ")} 冒险完成`}catch(a){Ba.error(JSON.stringify(a)),Oa.value="冒险失败，请重试"}Sa.value=!1},Fa=async()=>{Sa.value=!0,Oa.value="攻击地牢中...";try{const a=await Da(),e=Ja(),t=await a.attackCellar(e);await t.wait(),Oa.value=`${e.join(", ")} 攻击地牢完成`}catch(a){Ba.error(JSON.stringify(a)),Oa.value="攻击地牢失败，请重试"}Sa.value=!1},za=async()=>{Sa.value=!0,Oa.value="授权中...";try{const a=await Da(),e=Ja(),t=await a.approveBatch(e);await t.wait(),Oa.value=`${e.join(", ")} 授权完成`}catch(a){Ba.error(JSON.stringify(a)),Oa.value="授权失败，请重试"}Sa.value=!1},Ha=async()=>{Sa.value=!0,Oa.value="升级中...";try{const a=await Da(),e=Ja(),t=await a.levelUp(e);await t.wait(),Oa.value=`${e.join(", ")} 升级完成`}catch(a){Ba.error(JSON.stringify(a)),Oa.value="升级失败，请重试"}Sa.value=!1},Ra=async()=>{Sa.value=!0,Oa.value="领金中...";try{const a=await Da(),e=Ja(),t=await a.claim(e);await t.wait(),Oa.value=`${e.join(", ")} 领金完成`}catch(a){Ba.error(JSON.stringify(a)),Oa.value="领金失败，请重试，是否已授权？"}Sa.value=!1},Wa=async()=>{Sa.value=!0,Oa.value="设置属性中...";try{const a=await Da(),e=Ja(),[t,n,l,i,u,s]=(()=>{const a=[ha.value,_a.value,Ta.value,ka.value,Ca.value,Ma.value];if(a.every((a=>!isNaN(parseInt(a)))))return a;throw new Error("英雄ID不正确")})(),r=await a.pointBuy(e,Aa.value,t,n,l,i,u,s);await r.wait(),Oa.value=`${e.join(", ")} 设置属性完成`}catch(a){Ba.error(JSON.stringify(a)),Oa.value="设置属性失败，请重试，是否已授权？"}Sa.value=!1};return(a,e)=>{const t=l("n-spin"),n=l("n-button"),y=l("n-tooltip"),f=l("n-input"),g=l("n-text");return v(),i("div",C,[M,A,O,c.address?(v(),i("div",S,[xa.value.approve?(v(),u(t,{key:0,stroke:"#000"})):(v(),i(s,{key:1},[ja.value?p("",!0):(v(),i(s,{key:0},[j,r(n,{class:"btn-approve",loading:xa.value.action,size:"large",color:"#000",onClick:e[0]||(e[0]=a=>(async a=>{try{xa.value.action=!0;const e=await Na.value.setApprovalForAll(w.BATCH,a);await e.wait(),xa.value.action=!1,Ba.success("授权成功"),await Ia()}catch(e){Ba.error(e.toString)}})(!0))},{default:o((()=>[N])),_:1},8,["loading"])],64)),ja.value?(v(),i("div",U,[x,d("div",null,[r(n,{class:"btn-approve",ghost:"",size:"large",color:"#000",disabled:""},{default:o((()=>[B])),_:1}),r(n,{size:"large",onClick:e[1]||(e[1]=e=>a.unapprove(!1))},{default:o((()=>[I])),_:1})])])):p("",!0)],64))])):p("",!0),c.address&&ja.value?(v(),i("div",D,[r(y,{trigger:"hover"},{trigger:o((()=>[J])),default:o((()=>[$])),_:1}),d("div",F,[d("a",z,[r(n,null,{default:o((()=>[H])),_:1})]),d("a",R,[r(n,null,{default:o((()=>[W])),_:1})])]),q,d("div",E,[r(n,{class:"action-button",type:"primary",onClick:za,disabled:Sa.value},{default:o((()=>[P])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:$a,disabled:Sa.value},{default:o((()=>[G])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:Fa,disabled:Sa.value},{default:o((()=>[K])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:Ha,disabled:Sa.value},{default:o((()=>[L])),_:1},8,["disabled"]),r(n,{class:"action-button",type:"primary",onClick:Ra,disabled:Sa.value},{default:o((()=>[Q])),_:1},8,["disabled"])]),d("div",V,[r(n,{class:"action-button",type:"primary",onClick:Wa,disabled:Sa.value},{default:o((()=>[X])),_:1},8,["disabled"]),r(y,{trigger:"hover"},{trigger:o((()=>[r(f,{class:"action-button",value:Aa.value,"onUpdate:value":e[2]||(e[2]=a=>Aa.value=a),placeholder:"英雄类型 ID",disabled:Sa.value},null,8,["value","disabled"])])),default:o((()=>[Y,Z,aa,ea,ta,na,la,ia,ua,sa,ra,oa,pa,da,ca,ya,va,ba,ma,fa,wa,ga])),_:1}),r(f,{class:"action-button",value:ha.value,"onUpdate:value":e[3]||(e[3]=a=>ha.value=a),placeholder:"strength",disabled:Sa.value},null,8,["value","disabled"]),r(f,{class:"action-button",value:_a.value,"onUpdate:value":e[4]||(e[4]=a=>_a.value=a),placeholder:"dexterity",disabled:Sa.value},null,8,["value","disabled"]),r(f,{class:"action-button",value:Ta.value,"onUpdate:value":e[5]||(e[5]=a=>Ta.value=a),placeholder:"constitution",disabled:Sa.value},null,8,["value","disabled"]),r(f,{class:"action-button",value:ka.value,"onUpdate:value":e[6]||(e[6]=a=>ka.value=a),placeholder:"intelligence",disabled:Sa.value},null,8,["value","disabled"]),r(f,{class:"action-button",value:Ca.value,"onUpdate:value":e[7]||(e[7]=a=>Ca.value=a),placeholder:"wisdom",disabled:Sa.value},null,8,["value","disabled"]),r(f,{class:"action-button",value:Ma.value,"onUpdate:value":e[8]||(e[8]=a=>Ma.value=a),placeholder:"charisma",disabled:Sa.value},null,8,["value","disabled"])]),r(g,{type:"info"},{default:o((()=>[b(m(Oa.value),1)])),_:1}),r(f,{value:k.value,"onUpdate:value":e[9]||(e[9]=a=>k.value=a),type:"textarea",placeholder:"英雄ID列表，一行一个",disabled:Sa.value},null,8,["value","disabled"])])):p("",!0)])}}};"function"==typeof k&&k(ha),ha.__scopeId="data-v-c9ca7cf2";export{ha as default};
